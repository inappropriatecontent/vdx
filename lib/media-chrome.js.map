{
  "version": 3,
  "sources": ["../../src/js/index.js", "../../src/js/constants.js", "../../src/js/labels/labels.js", "../../src/js/utils/time.js", "../../src/js/utils/utils.js", "../../src/js/utils/element-utils.js", "../../src/js/utils/server-safe-globals.js", "../../src/js/media-chrome-button.js", "../../src/js/media-airplay-button.js", "../../src/js/media-cast-button.js", "../../src/js/media-gesture-receiver.js", "../../src/js/media-container.js", "../../src/js/utils/attribute-token-list.js", "../../src/js/utils/fullscreenApi.js", "../../src/js/utils/captions.js", "../../src/js/media-controller.js", "../../src/js/media-chrome-range.js", "../../src/js/media-control-bar.js", "../../src/js/media-text-display.js", "../../src/js/media-current-time-display.js", "../../src/js/media-duration-display.js", "../../src/js/media-time-display.js", "../../src/js/media-captions-button.js", "../../src/js/media-seek-forward-button.js", "../../src/js/media-fullscreen-button.js", "../../src/js/media-live-button.js", "../../src/js/media-mute-button.js", "../../src/js/media-pip-button.js", "../../src/js/media-play-button.js", "../../src/js/media-playback-rate-button.js", "../../src/js/media-poster-image.js", "../../src/js/media-time-range.js", "../../src/js/media-progress-range.js", "../../src/js/media-seek-backward-button.js", "../../src/js/media-preview-time-display.js", "../../src/js/media-preview-thumbnail.js", "../../src/js/media-loading-indicator.js", "../../src/js/media-title-element.js", "../../src/js/media-volume-range.js"],
  "sourcesContent": ["export * as constants from './constants.js';\nexport { default as labels } from './labels/labels.js';\nexport * as timeUtils from './utils/time.js';\nimport MediaAirplayButton from './media-airplay-button.js';\nimport MediaCastButton from './media-cast-button.js';\nimport MediaChromeButton from './media-chrome-button.js';\nimport MediaGestureReceiver from './media-gesture-receiver.js';\nimport MediaController from './media-controller.js';\nimport MediaChromeRange from './media-chrome-range.js';\nimport MediaControlBar from './media-control-bar.js';\nimport MediaCurrentTimeDisplay from './media-current-time-display.js';\nimport MediaDurationDisplay from './media-duration-display.js';\nimport MediaTimeDisplay from './media-time-display.js';\nimport MediaCaptionsButton from './media-captions-button.js';\nimport MediaSeekForwardButton from './media-seek-forward-button.js';\nimport MediaFullscreenButton from './media-fullscreen-button.js';\nimport MediaLiveButton from './media-live-button.js';\nimport MediaMuteButton from './media-mute-button.js';\nimport MediaPipButton from './media-pip-button.js';\nimport MediaPlayButton from './media-play-button.js';\nimport MediaPlaybackRateButton from './media-playback-rate-button.js';\nimport MediaPosterImage from './media-poster-image.js';\nimport MediaProgressRange from './media-progress-range.js';\nimport MediaSeekBackwardButton from './media-seek-backward-button.js';\nimport MediaPreviewTimeDisplay from './media-preview-time-display.js';\nimport MediaPreviewThumbnail from './media-preview-thumbnail.js';\nimport MediaTimeRange from './media-time-range.js';\nimport MediaLoadingIndicator from './media-loading-indicator.js';\nimport MediaTitleElement from './media-title-element.js';\nimport MediaVolumeRange from './media-volume-range.js';\nimport { window } from './utils/server-safe-globals.js';\n\n// Alias <media-controller> as <media-chrome>\n// Might move MediaChrome to include default controls\nclass MediaChrome extends MediaController {}\nif (!window.customElements.get('media-chrome')) {\n  window.customElements.define('media-chrome', MediaChrome);\n}\n\n// Alias <media-controller> as <media-container>\n// to not break existing installs in transition.\n// Eventually expose media-container as unique element\nclass MediaContainer extends MediaController {\n  constructor() {\n    super();\n    console.warn(\n      'MediaChrome: <media-container> is deprecated. Use <media-controller>.'\n    );\n  }\n}\nif (!window.customElements.get('media-container')) {\n  window.customElements.define('media-container', MediaContainer);\n}\n\nexport {\n  MediaAirplayButton,\n  MediaCastButton,\n  MediaChromeButton,\n  MediaGestureReceiver,\n  MediaContainer,\n  MediaController,\n  MediaChromeRange,\n  MediaControlBar,\n  MediaCurrentTimeDisplay,\n  MediaDurationDisplay,\n  MediaTimeDisplay,\n  MediaCaptionsButton,\n  MediaSeekForwardButton,\n  MediaFullscreenButton,\n  MediaLiveButton,\n  MediaMuteButton,\n  MediaPipButton,\n  MediaPlayButton,\n  MediaPlaybackRateButton,\n  MediaPosterImage,\n  MediaProgressRange,\n  MediaSeekBackwardButton,\n  MediaPreviewTimeDisplay,\n  MediaPreviewThumbnail,\n  MediaTimeRange,\n  MediaTitleElement,\n  MediaLoadingIndicator,\n  MediaVolumeRange,\n};\n", "export const MediaUIEvents = {\n  MEDIA_PLAY_REQUEST: 'mediaplayrequest',\n  MEDIA_PAUSE_REQUEST: 'mediapauserequest',\n  MEDIA_MUTE_REQUEST: 'mediamuterequest',\n  MEDIA_UNMUTE_REQUEST: 'mediaunmuterequest',\n  MEDIA_VOLUME_REQUEST: 'mediavolumerequest',\n  MEDIA_SEEK_REQUEST: 'mediaseekrequest',\n  MEDIA_AIRPLAY_REQUEST: 'mediaairplayrequest',\n  MEDIA_ENTER_FULLSCREEN_REQUEST: 'mediaenterfullscreenrequest',\n  MEDIA_EXIT_FULLSCREEN_REQUEST: 'mediaexitfullscreenrequest',\n  MEDIA_PREVIEW_REQUEST: 'mediapreviewrequest',\n  MEDIA_ENTER_PIP_REQUEST: 'mediaenterpiprequest',\n  MEDIA_EXIT_PIP_REQUEST: 'mediaexitpiprequest',\n  MEDIA_ENTER_CAST_REQUEST: 'mediaentercastrequest',\n  MEDIA_EXIT_CAST_REQUEST: 'mediaexitcastrequest',\n  MEDIA_SHOW_TEXT_TRACKS_REQUEST: 'mediashowtexttracksrequest',\n  MEDIA_HIDE_TEXT_TRACKS_REQUEST: 'mediahidetexttracksrequest',\n  MEDIA_SHOW_CAPTIONS_REQUEST: 'mediashowcaptionsrequest',\n  MEDIA_SHOW_SUBTITLES_REQUEST: 'mediashowsubtitlesrequest',\n  MEDIA_DISABLE_CAPTIONS_REQUEST: 'mediadisablecaptionsrequest',\n  MEDIA_DISABLE_SUBTITLES_REQUEST: 'mediadisablesubtitlesrequest',\n  MEDIA_PLAYBACK_RATE_REQUEST: 'mediaplaybackraterequest',\n  MEDIA_SEEK_TO_LIVE_REQUEST: 'mediaseektoliverequest',\n  REGISTER_MEDIA_STATE_RECEIVER: 'registermediastatereceiver',\n  UNREGISTER_MEDIA_STATE_RECEIVER: 'unregistermediastatereceiver',\n};\n\nexport const MediaStateChangeEvents = {\n  MEDIA_AIRPLAY_UNAVAILABLE: 'mediaairplayunavailablechange',\n  MEDIA_PIP_UNAVAILABLE: 'mediapipunavailablechange',\n  MEDIA_PAUSED: 'mediapausedchange',\n  MEDIA_HAS_PLAYED: 'mediahasplayedchange',\n  MEDIA_MUTED: 'mediamutedchange',\n  MEDIA_VOLUME_LEVEL: 'mediavolumelevelchange',\n  MEDIA_VOLUME: 'mediavolumechange',\n  MEDIA_VOLUME_UNAVAILABLE: 'mediavolumeunavailablechange',\n  MEDIA_IS_PIP: 'mediaispipchange',\n  MEDIA_IS_CASTING: 'mediaiscastingchange',\n  MEDIA_CAPTIONS_LIST: 'mediacaptionslistchange',\n  MEDIA_SUBTITLES_LIST: 'mediasubtitleslistchange',\n  MEDIA_CAPTIONS_SHOWING: 'mediacaptionsshowingchange',\n  MEDIA_SUBTITLES_SHOWING: 'mediasubtitlesshowingchange',\n  MEDIA_IS_FULLSCREEN: 'mediaisfullscreenchange',\n  MEDIA_PLAYBACK_RATE: 'mediaplaybackratechange',\n  MEDIA_CURRENT_TIME: 'mediacurrenttimechange',\n  MEDIA_DURATION: 'mediadurationchange',\n  MEDIA_SEEKABLE: 'mediaseekablechange',\n  MEDIA_PREVIEW_IMAGE: 'mediapreviewimagechange',\n  MEDIA_PREVIEW_COORDS: 'mediapreviewcoordschange',\n  MEDIA_LOADING: 'medialoadingchange',\n  USER_INACTIVE: 'userinactivechange',\n};\n\nexport const MediaStateReceiverAttributes = {\n  MEDIA_CHROME_ATTRIBUTES: 'media-chrome-attributes',\n  MEDIA_CONTROLLER: 'media-controller',\n};\n\nexport const MediaUIAttributes = {\n  MEDIA_AIRPLAY_UNAVAILABLE: 'media-airplay-unavailable',\n  MEDIA_FULLSCREEN_UNAVAILABLE: 'media-fullscreen-unavailable',\n  MEDIA_PIP_UNAVAILABLE: 'media-pip-unavailable',\n  MEDIA_CAST_UNAVAILABLE: 'media-cast-unavailable',\n  MEDIA_PAUSED: 'media-paused',\n  MEDIA_HAS_PLAYED: 'media-has-played',\n  MEDIA_MUTED: 'media-muted',\n  MEDIA_VOLUME_LEVEL: 'media-volume-level',\n  MEDIA_VOLUME: 'media-volume',\n  MEDIA_VOLUME_UNAVAILABLE: 'media-volume-unavailable',\n  MEDIA_IS_PIP: 'media-is-pip',\n  MEDIA_IS_CASTING: 'media-is-casting',\n  MEDIA_CAPTIONS_LIST: 'media-captions-list',\n  MEDIA_SUBTITLES_LIST: 'media-subtitles-list',\n  MEDIA_CAPTIONS_SHOWING: 'media-captions-showing',\n  MEDIA_SUBTITLES_SHOWING: 'media-subtitles-showing',\n  MEDIA_IS_FULLSCREEN: 'media-is-fullscreen',\n  MEDIA_PLAYBACK_RATE: 'media-playback-rate',\n  MEDIA_CURRENT_TIME: 'media-current-time',\n  MEDIA_DURATION: 'media-duration',\n  MEDIA_SEEKABLE: 'media-seekable',\n  MEDIA_PREVIEW_TIME: 'media-preview-time',\n  MEDIA_PREVIEW_IMAGE: 'media-preview-image',\n  MEDIA_PREVIEW_COORDS: 'media-preview-coords',\n  MEDIA_LOADING: 'media-loading',\n  MEDIA_BUFFERED: 'media-buffered',\n  MEDIA_STREAM_TYPE: 'media-stream-type',\n  MEDIA_TARGET_LIVE_WINDOW: 'media-target-live-window',\n  MEDIA_TIME_IS_LIVE: 'media-time-is-live',\n};\n\n// Maps from state change event type -> attribute name\nexport const StateChangeEventToAttributeMap = Object.entries(\n  MediaStateChangeEvents\n).reduce(\n  (mapObj, [key, eventType]) => {\n    const attrName = MediaUIAttributes[key];\n    if (attrName) {\n      mapObj[eventType] = attrName;\n    }\n    return mapObj;\n  },\n  { userinactivechange: 'user-inactive' }\n);\n\n// Maps from attribute name -> state change event type\nexport const AttributeToStateChangeEventMap = Object.entries(\n  MediaUIAttributes\n).reduce(\n  (mapObj, [key, attrName]) => {\n    const evtType = MediaStateChangeEvents[key];\n    if (evtType) {\n      mapObj[attrName] = evtType;\n    }\n    return mapObj;\n  },\n  { 'user-inactive': 'userinactivechange' }\n);\n\nexport const TextTrackKinds = {\n  SUBTITLES: 'subtitles',\n  CAPTIONS: 'captions',\n  DESCRIPTIONS: 'descriptions',\n  CHAPTERS: 'chapters',\n  METADATA: 'metadata',\n};\n\nexport const TextTrackModes = {\n  DISABLED: 'disabled',\n  HIDDEN: 'hidden',\n  SHOWING: 'showing',\n};\n\nexport const ReadyStates = {\n  HAVE_NOTHING: 0,\n  HAVE_METADATA: 1,\n  HAVE_CURRENT_DATA: 2,\n  HAVE_FUTURE_DATA: 3,\n  HAVE_ENOUGH_DATA: 4,\n};\n\nexport const PointerTypes = {\n  MOUSE: 'mouse',\n  PEN: 'pen',\n  TOUCH: 'touch',\n};\n\nexport const AvailabilityStates = {\n  UNAVAILABLE: 'unavailable',\n  UNSUPPORTED: 'unsupported',\n};\n\nexport const StreamTypes = {\n  LIVE: 'live',\n  ON_DEMAND: 'on-demand',\n  UNKNOWN: 'unknown',\n};\n", "/** @type {{ [k: string]: (x?: Partial<{ seekOffset: number; playbackRate: number; }>) => string; }} */\nexport const nouns = {\n  AUDIO_PLAYER: () => 'audio player',\n  VIDEO_PLAYER: () => 'video player',\n  VOLUME: () => 'volume',\n  SEEK: () => 'seek',\n  CLOSED_CAPTIONS: () => 'closed captions',\n  PLAYBACK_RATE: ({ playbackRate = 1 } = {}) =>\n    `current playback rate ${playbackRate}`,\n  PLAYBACK_TIME: () => `playback time`,\n  MEDIA_LOADING: () => `media loading`,\n};\n\n/** @type {{ [k: string]: (x?: Partial<{ seekOffset: number; playbackRate: number; }>) => string; }} */\nexport const verbs = {\n  PLAY: () => 'play',\n  PAUSE: () => 'pause',\n  MUTE: () => 'mute',\n  UNMUTE: () => 'unmute',\n  AIRPLAY: () => 'air play',\n  ENTER_CAST: () => 'start casting',\n  EXIT_CAST: () => 'stop casting',\n  ENTER_FULLSCREEN: () => 'enter fullscreen mode',\n  EXIT_FULLSCREEN: () => 'exit fullscreen mode',\n  ENTER_PIP: () => 'enter picture in picture mode',\n  EXIT_PIP: () => 'exit picture in picture mode',\n  SEEK_FORWARD_N_SECS: ({ seekOffset = 30 } = {}) =>\n    `seek forward ${seekOffset} seconds`,\n  SEEK_BACK_N_SECS: ({ seekOffset = 30 } = {}) =>\n    `seek back ${seekOffset} seconds`,\n};\n\nexport default {\n  ...nouns,\n  ...verbs,\n};\n", "import { isValidNumber } from './utils.js';\n\nconst UnitLabels = [\n  {\n    singular: 'hour',\n    plural: 'hours',\n  },\n  {\n    singular: 'minute',\n    plural: 'minutes',\n  },\n  {\n    singular: 'second',\n    plural: 'seconds',\n  },\n];\nconst toTimeUnitPhrase = (timeUnitValue, unitIndex) => {\n  const unitLabel =\n    timeUnitValue === 1\n      ? UnitLabels[unitIndex].singular\n      : UnitLabels[unitIndex].plural;\n\n  return `${timeUnitValue} ${unitLabel}`;\n};\n\n/**\n * This function converts numeric seconds into a phrase\n * @param {number} seconds - a (positive or negative) time, represented as seconds\n * @returns {string} The time, represented as a phrase of hours, minutes, and seconds\n */\nexport const formatAsTimePhrase = (seconds) => {\n  if (!isValidNumber(seconds)) return '';\n  const positiveSeconds = Math.abs(seconds);\n  const negative = positiveSeconds !== seconds;\n  const secondsDateTime = new Date(0, 0, 0, 0, 0, positiveSeconds, 0);\n  const timeParts = [\n    secondsDateTime.getHours(),\n    secondsDateTime.getMinutes(),\n    secondsDateTime.getSeconds(),\n  ];\n  // NOTE: Everything above should be useable for the `formatTime` function.\n\n  const timeString = timeParts\n    // Convert non-0 values to a string of the value plus its unit\n    .map(\n      (timeUnitValue, index) =>\n        timeUnitValue && toTimeUnitPhrase(timeUnitValue, index)\n    )\n    // Ignore/exclude any 0 values\n    .filter((x) => x)\n    // join into a single comma-separated string phrase\n    .join(', ');\n\n  // If the time was negative, assume it represents some remaining amount of time/\"count down\".\n  const negativeSuffix = negative ? ' remaining' : '';\n\n  return `${timeString}${negativeSuffix}`;\n};\n\nexport function formatTime(seconds, guide) {\n  // Handle negative values at the end\n  let negative = false;\n\n  if (seconds < 0) {\n    negative = true;\n    seconds = 0 - seconds;\n  }\n\n  seconds = seconds < 0 ? 0 : seconds;\n  /** @type {number|string} */\n  let s = Math.floor(seconds % 60);\n  /** @type {number|string} */\n  let m = Math.floor((seconds / 60) % 60);\n  /** @type {number|string} */\n  let h = Math.floor(seconds / 3600);\n  const gm = Math.floor((guide / 60) % 60);\n  const gh = Math.floor(guide / 3600);\n\n  // handle invalid times\n  if (isNaN(seconds) || seconds === Infinity) {\n    // '-' is false for all relational operators (e.g. <, >=) so this setting\n    // will add the minimum number of fields specified by the guide\n    h = m = s = '-';\n  }\n\n  // Check if we need to show hours\n  h = h > 0 || gh > 0 ? h + ':' : '';\n\n  // If hours are showing, we may need to add a leading zero.\n  // Always show at least one digit of minutes.\n  m = ((h || gm >= 10) && m < 10 ? '0' + m : m) + ':';\n\n  // Check if leading zero is need for seconds\n  s = s < 10 ? '0' + s : s;\n\n  return (negative ? '-' : '') + h + m + s;\n}\n", "export function dashedToCamel(word) {\n  return word\n    .split('-')\n    .map(function (x, i) {\n      return (\n        (i ? x[0].toUpperCase() : x[0].toLowerCase()) + x.slice(1).toLowerCase()\n      );\n    })\n    .join('');\n}\n\nexport function constToCamel(word, upperFirst = false) {\n  return word\n    .split('_')\n    .map(function (x, i) {\n      return (\n        (i || upperFirst ? x[0].toUpperCase() : x[0].toLowerCase()) +\n        x.slice(1).toLowerCase()\n      );\n    })\n    .join('');\n}\n\nexport function camelCase(name) {\n  return name.replace(/[-_]([a-z])/g, ($0, $1) => $1.toUpperCase());\n}\n\nexport function isValidNumber(x) {\n  return typeof x === 'number' && !Number.isNaN(x) && Number.isFinite(x);\n}\n\nexport function isNumericString(str) {\n  if (typeof str != 'string') return false; // we only process strings!\n  // @ts-ignore\n  return !isNaN(str) && !isNaN(parseFloat(str));\n}\n", "export const updateIconText = (svg, value, selector = '.value') => {\n  const node = svg.querySelector(selector);\n\n  if (!node) return;\n\n  node.textContent = value;\n};\n\nexport const getAllSlotted = (el, name) => {\n  const slotSelector = `slot[name=\"${name}\"]`;\n  const slot = el.shadowRoot.querySelector(slotSelector);\n  if (!slot) return [];\n  return slot.children;\n};\n\nexport const getSlotted = (el, name) => getAllSlotted(el, name)[0];\n\nexport const containsComposedNode = (rootNode, childNode) => {\n  if (!rootNode || !childNode) return false;\n  if (rootNode.contains(childNode)) return true;\n  return containsComposedNode(rootNode, childNode.getRootNode().host);\n};\n\nexport const closestComposedNode = (childNode, selector) => {\n  if (!childNode) return null;\n  const closest = childNode.closest(selector);\n  if (closest) return closest;\n  return closestComposedNode(childNode.getRootNode().host, selector);\n};\n\n/**\n * Get or insert a CSS rule with a selector in an element containing <style> tags.\n * @param  {Element|ShadowRoot} styleParent\n * @param  {string} selectorText\n * @return {CSSStyleRule |\n * { style: {\n * setProperty: () => void,\n * removeProperty: () => void,\n * width?: string,\n * height?: string,\n * display?: string,\n * transform?: string,\n * }}}\n */\nexport function getOrInsertCSSRule(styleParent, selectorText) {\n  let style;\n  // @ts-ignore\n  for (style of styleParent.querySelectorAll('style')) {\n    // Catch this error. e.g. browser extension adds style tags.\n    //   Uncaught DOMException: CSSStyleSheet.cssRules getter:\n    //   Not allowed to access cross-origin stylesheet\n    let cssRules;\n    try { cssRules = style.sheet?.cssRules; } catch { continue; }\n    for (let rule of cssRules ?? [])\n      if (rule.selectorText === selectorText) return rule;\n  }\n  // If there is no style sheet return an empty style rule.\n  if (!style?.sheet) {\n    return {\n      style: {\n        setProperty: () => {},\n        removeProperty: () => {}\n      }\n    };\n  }\n\n  style.sheet.insertRule(`${selectorText}{}`, style.sheet.cssRules.length);\n  return style.sheet.cssRules[style.sheet.cssRules.length - 1];\n}\n", "class EventTarget {\n  addEventListener() {}\n  removeEventListener() {}\n  dispatchEvent() {\n    return true;\n  }\n}\n\nclass ResizeObserver {\n  observe() {}\n}\n\nconst windowShim = {\n  ResizeObserver,\n  HTMLElement: class HTMLElement extends EventTarget {},\n  DocumentFragment: class DocumentFragment extends EventTarget {},\n  customElements: {\n    get: function () {},\n    define: function () {},\n    whenDefined: function () {},\n  },\n  CustomEvent: function CustomEvent() {},\n  getComputedStyle: function () {},\n};\n\nconst documentShim = {\n  createElement: function () {\n    return new windowShim.HTMLElement();\n  },\n};\n\nexport const isServer =\n  typeof window === 'undefined' ||\n  typeof window.customElements === 'undefined';\n\n/**\n  * @type { window & { WebKitPlaybackTargetAvailabilityEvent?,\n  *   chrome?,\n  *   DocumentFragment?,\n  *   getComputedStyle,\n  * } |\n  * {HTMLElement,\n  * customElements,\n  * CustomEvent,\n  * getComputedStyle,\n  * addEventListener?,\n  * removeEventListener?,\n  * setTimeout?,\n  * clearTimeout?,\n  * localStorage?,\n  * WebKitPlaybackTargetAvailabilityEvent?,\n  * document?,\n  * chrome?,\n  * DocumentFragment?,\n  * ResizeObserver?\n  * } }\n  * */\nexport const Window = isServer ? windowShim : window;\n/**\n  * @type { document & { webkitExitFullscreen? } |\n  * {createElement,\n  * fullscreenElement?,\n  * webkitExitFullscreen?,\n  * getElementById?,\n  * pictureInPictureElement?,\n  * exitPictureInPicture?,\n  * pictureInPictureEnabled?,\n  * requestPictureInPicture?,\n  * } }\n  */\nexport const Document = isServer ? documentShim : window.document;\n\nexport { Window as window, Document as document };\n", "import { MediaStateReceiverAttributes } from './constants.js';\nimport { getOrInsertCSSRule } from './utils/element-utils.js';\nimport { window, document } from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n<style>\n  :host {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    background: var(--media-control-background, rgba(20,20,30, 0.7));\n\n    padding: var(--media-control-padding, 10px);\n\n    ${/* Vertically center any text */''}\n    font-size: 14px;\n    line-height: var(--media-text-content-height, var(--media-control-height, 24px));\n    font-weight: bold;\n    color: #fff;\n\n    transition: background 0.15s linear;\n\n    pointer-events: auto;\n    cursor: pointer;\n    font-family: Arial, sans-serif;\n  }\n\n  ${/*\n    Only show outline when keyboard focusing.\n    https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n  */''}\n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);\n    outline: 0;\n  }\n  ${/*\n   * hide default focus ring, particularly when using mouse\n   */''}\n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50,50,70, 0.7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, #eee);\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n</style>\n`;\n\n/**\n * @extends {HTMLElement}\n */\nclass MediaChromeButton extends window.HTMLElement {\n  #mediaController;\n  preventClick = false;\n\n  static get observedAttributes() {\n    return ['disabled', MediaStateReceiverAttributes.MEDIA_CONTROLLER];\n  }\n\n  constructor(options = {}) {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n\n    const buttonHTML = template.content.cloneNode(true);\n    this.nativeEl = buttonHTML;\n\n    // Slots\n    let slotTemplate = options.slotTemplate;\n\n    if (!slotTemplate) {\n      slotTemplate = document.createElement('template');\n      slotTemplate.innerHTML = `<slot>${options.defaultContent || ''}</slot>`;\n    }\n\n    this.nativeEl.appendChild(slotTemplate.content.cloneNode(true));\n\n    this.shadowRoot.appendChild(buttonHTML);\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n    style.setProperty('display', `var(--media-control-display, var(--${this.localName}-display, inline-flex))`);\n  }\n\n  #clickListener = (e) => {\n    if (!this.preventClick) {\n      this.handleClick(e);\n    }\n  }\n\n  // NOTE: There are definitely some \"false positive\" cases with multi-key pressing,\n  // but this should be good enough for most use cases.\n  #keyupListener = (e) => {\n    const { key } = e;\n    if (!this.keysUsed.includes(key)) {\n      this.removeEventListener('keyup', this.#keyupListener);\n      return;\n    }\n\n    this.handleClick(e);\n  }\n\n  #keydownListener = (e) => {\n    const { metaKey, altKey, key } = e;\n    if (metaKey || altKey || !this.keysUsed.includes(key)) {\n      this.removeEventListener('keyup', this.#keyupListener);\n      return;\n    }\n    this.addEventListener('keyup', this.#keyupListener, {once: true});\n  }\n\n  enable() {\n    this.addEventListener('click', this.#clickListener);\n    this.addEventListener('keydown', this.#keydownListener);\n    this.setAttribute('tabindex', '0');\n  }\n\n  disable() {\n    this.removeEventListener('click', this.#clickListener);\n    this.removeEventListener('keyup', this.#keyupListener);\n    this.removeAttribute('tabindex');\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    } else if (attrName === 'disabled' && newValue !== oldValue) {\n      if (newValue == null) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n    }\n  }\n\n  connectedCallback() {\n    if (!this.hasAttribute('disabled')) {\n      this.enable();\n    }\n\n    this.setAttribute('role', 'button');\n\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n  }\n\n  disconnectedCallback() {\n    this.disable();\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n  }\n\n  get keysUsed() {\n    return ['Enter', ' '];\n  }\n\n  /**\n   * @abstract\n   * @argument {Event} e\n   */\n  handleClick(e) {} // eslint-disable-line\n}\n\nif (!window.customElements.get('media-chrome-button')) {\n  window.customElements.define('media-chrome-button', MediaChromeButton);\n}\n\nexport default MediaChromeButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst airplayIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 26 24\">\n  <path d=\"M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z\"/>\n</svg>\n`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <slot name=\"airplay\">${airplayIcon}</slot>\n`;\n\n/**\n * @attr {(unavailable|unsupported)} media-airplay-unavailable\n *\n * @slot airplay\n *\n * @event {CustomEvent} mediaairplayrequest\n */\nclass MediaAirplayButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE,\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    this.setAttribute('aria-label', verbs.AIRPLAY());\n    super.connectedCallback();\n  }\n\n  handleClick() {\n    const evt = new window.CustomEvent(MediaUIEvents.MEDIA_AIRPLAY_REQUEST, {\n      composed: true,\n      bubbles: true,\n    });\n    this.dispatchEvent(evt);\n  }\n}\n\nif (!window.customElements.get('media-airplay-button')) {\n  window.customElements.define('media-airplay-button', MediaAirplayButton);\n}\n\nexport default MediaAirplayButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst enterIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\"><g><path class=\"cast_caf_icon_arch0\" d=\"M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z\"/><path class=\"cast_caf_icon_arch1\" d=\"M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z\"/><path class=\"cast_caf_icon_arch2\" d=\"M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z\"/><path class=\"cast_caf_icon_box\" d=\"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z\"/></g></svg>`;\n\nconst exitIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\"><g><path class=\"cast_caf_icon_arch0\" d=\"M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z\"/><path class=\"cast_caf_icon_arch1\" d=\"M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z\"/><path class=\"cast_caf_icon_arch2\" d=\"M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z\"/><path class=\"cast_caf_icon_box\" d=\"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z\"/><path class=\"cast_caf_icon_boxfill\" d=\"M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z\"/></g></svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host([${MediaUIAttributes.MEDIA_IS_CASTING}]) slot:not([name=exit]) > *,\n  :host([${MediaUIAttributes.MEDIA_IS_CASTING}]) ::slotted(:not([slot=exit])) {\n    display: none !important;\n  }\n\n  ${/* Double negative, but safer if display doesn't equal 'block' */ ''}\n  :host(:not([${MediaUIAttributes.MEDIA_IS_CASTING}])) slot:not([name=enter]) > *,\n  :host(:not([${MediaUIAttributes.MEDIA_IS_CASTING}])) ::slotted(:not([slot=enter])) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"enter\">${enterIcon}</slot>\n  <slot name=\"exit\">${exitIcon}</slot>\n`;\n\nconst updateAriaLabel = (el) => {\n  const isCast =\n    el.getAttribute(MediaUIAttributes.MEDIA_IS_CASTING) != null;\n  const label = isCast\n    ? verbs.EXIT_CAST()\n    : verbs.ENTER_CAST();\n  el.setAttribute('aria-label', label);\n};\n\nclass MediaCastButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_IS_CASTING,\n      MediaUIAttributes.MEDIA_CAST_UNAVAILABLE,\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    updateAriaLabel(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_IS_CASTING) {\n      updateAriaLabel(this);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_IS_CASTING) != null\n        ? MediaUIEvents.MEDIA_EXIT_CAST_REQUEST\n        : MediaUIEvents.MEDIA_ENTER_CAST_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nif (!window.customElements.get('media-cast-button')) {\n  window.customElements.define('media-cast-button', MediaCastButton);\n}\n\nexport default MediaCastButton;\n", "import {\n  MediaUIAttributes,\n  MediaUIEvents,\n  MediaStateReceiverAttributes,\n  PointerTypes\n} from './constants.js';\nimport { closestComposedNode } from './utils/element-utils.js';\nimport { window, document } from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n`;\n\nclass MediaGestureReceiver extends window.HTMLElement {\n  #mediaController;\n\n  // NOTE: Currently \"baking in\" actions + attrs until we come up with\n  // a more robust architecture (CJP)\n  static get observedAttributes() {\n    return [MediaStateReceiverAttributes.MEDIA_CONTROLLER, MediaUIAttributes.MEDIA_PAUSED];\n  }\n\n  constructor(options = {}) {\n    super();\n\n    const shadow = this.attachShadow({ mode: 'open' });\n\n    const buttonHTML = template.content.cloneNode(true);\n    this.nativeEl = buttonHTML;\n\n    // Slots\n    let slotTemplate = options.slotTemplate;\n\n    if (!slotTemplate) {\n      slotTemplate = document.createElement('template');\n      slotTemplate.innerHTML = `<slot>${options.defaultContent || ''}</slot>`;\n    }\n\n    this.nativeEl.appendChild(slotTemplate.content.cloneNode(true));\n    shadow.appendChild(buttonHTML);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    }\n  }\n\n  connectedCallback() {\n    this.setAttribute('tabindex', -1);\n    this.setAttribute('aria-hidden', true);\n\n    this.#mediaController = getMediaControllerEl(this);\n    if (this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER)) {\n      this.#mediaController?.associateElement?.(this);\n    }\n\n    this.#mediaController?.addEventListener('pointerdown', this);\n    this.#mediaController?.addEventListener('click', this);\n  }\n\n  disconnectedCallback() {\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    if (this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER)) {\n      this.#mediaController?.unassociateElement?.(this);\n    }\n\n    this.#mediaController?.removeEventListener('pointerdown', this);\n    this.#mediaController?.removeEventListener('click', this);\n    this.#mediaController = null;\n  }\n\n  handleEvent(event) {\n    const composedTarget = event.composedPath()?.[0];\n    const allowList = ['video', 'media-controller'];\n    if (!allowList.includes(composedTarget?.localName)) return;\n\n    if (event.type === 'pointerdown') {\n      // Since not all browsers have updated to be spec compliant, where 'click' events should be PointerEvents,\n      // we can use use 'pointerdown' to reliably determine the pointer type. (CJP).\n      this._pointerType = event.pointerType;\n    } else if (event.type === 'click') {\n      // Cannot use composedPath or target because this is a layer on top and pointer events are disabled.\n      // Attach to window and check if click is in this element's bounding box to keep <video> right-click menu.\n      const { clientX, clientY } = event;\n      const { left, top, width, height } = this.getBoundingClientRect();\n      const x = clientX - left;\n      const y = clientY - top;\n      if (\n        x < 0 ||\n        y < 0 ||\n        x > width ||\n        y > height ||\n        // In case this element has no dimensions (or display: none) return.\n        (width === 0 && height === 0)\n      ) {\n        return;\n      }\n\n      const { pointerType = this._pointerType } = event;\n      // NOTE: While there are cases where we may have a stale this._pointerType,\n      // we're guaranteed that the most recent this._pointerType will correspond\n      // to the current click event definitionally. As such, this clearing is technically\n      // unnecessary (CJP)\n      this._pointerType = undefined;\n\n      // NOTE: Longer term, we'll likely want to delay this to support double click/double tap (CJP)\n      if (pointerType === PointerTypes.TOUCH) {\n        this.handleTap(event);\n        return;\n      } else if (pointerType === PointerTypes.MOUSE) {\n        this.handleMouseClick(event);\n        return;\n      }\n    }\n  }\n\n  // NOTE: Currently \"baking in\" actions + attrs until we come up with\n  // a more robust architecture (CJP)\n  /**\n   * @abstract\n   * @argument {Event} e\n   */\n  handleTap(e) {} // eslint-disable-line\n\n  handleMouseClick(e) { // eslint-disable-line\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_PAUSED) != null\n        ? MediaUIEvents.MEDIA_PLAY_REQUEST\n        : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nfunction getMediaControllerEl(controlEl) {\n  const mediaControllerId = controlEl.getAttribute(\n    MediaStateReceiverAttributes.MEDIA_CONTROLLER\n  );\n  if (mediaControllerId) {\n    return controlEl.getRootNode()?.getElementById(mediaControllerId);\n  }\n  return closestComposedNode(controlEl, 'media-controller');\n}\n\nif (!window.customElements.get('media-gesture-receiver')) {\n  window.customElements.define('media-gesture-receiver', MediaGestureReceiver);\n}\n\nexport default MediaGestureReceiver;\n", "/*\n  The <media-chrome> can contain the control elements\n  and the media element. Features:\n  * Auto-set the `media` attribute on child media chrome elements\n    * Uses the element with slot=\"media\"\n  * Take custom controls to fullscreen\n  * Position controls at the bottom\n  * Auto-hide controls on inactivity while playing\n*/\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes, MediaStateChangeEvents } from './constants.js';\nimport { nouns } from './labels/labels.js';\n// Guarantee that `<media-gesture-receiver/>` is available for use in the template\nimport './media-gesture-receiver.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n  <style>\n    ${/*\n     * outline on media is turned off because it is allowed to get focus to faciliate hotkeys.\n     * However, on keyboard interactions, the focus outline is shown,\n     * which is particularly noticeable when going fullscreen via hotkeys.\n     */''}\n    :host([media-is-fullscreen])  ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([audio])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    ${/*\n     * when in audio mode, hide the gesture-layer which causes media-controller to be taller than the control bar\n     */''}\n    :host([audio]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    ${/*\n     * if gestures are disabled, don't accept pointer-events\n     */''}\n    :host(:not([audio])[gestures-disabled]) ::slotted([slot=gestures-chrome]),\n    :host(:not([audio])[gestures-disabled]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    ${/*\n     * any slotted element that isn't a poster or media slot should be pointer-events auto\n     * we'll want to add here any slotted elements that shouldn't get pointer-events by default when slotted\n     */''}\n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator)) {\n      pointer-events: auto;\n    }\n\n    :host(:not([audio])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([audio])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([audio])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    ${/* Position the media and poster elements to fill the container */''}\n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    ${/* Video specific styles */''}\n    :host(:not([audio])) .spacer {\n      flex-grow: 1;\n    }\n\n    ${/* Safari needs this to actually make the element fill the window */''}\n    :host(:-webkit-full-screen) {\n      ${/* Needs to use !important otherwise easy to break */''}\n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    ${/* Only add these if auto hide is not disabled */''}\n    ::slotted(:not([slot=media]):not([no-auto-hide])) {\n      opacity: 1;\n      transition: opacity 0.25s;\n    }\n\n    ${/* Hide controls when inactive, not paused, not audio and auto hide not disabled */''}\n    :host([user-inactive]:not([${MediaUIAttributes.MEDIA_PAUSED}]):not([${MediaUIAttributes.MEDIA_IS_CASTING}]):not([audio])) ::slotted(:not([slot=media]):not([no-auto-hide])) {\n      opacity: 0;\n      transition: opacity 1s;\n    }\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    :host([${MediaUIAttributes.MEDIA_HAS_PLAYED}]) ::slotted([slot=poster]) {\n      display: none;\n    }\n  </style>\n\n  <slot name=\"media\" part=\"layer media-layer\"></slot>\n  <slot name=\"poster\" part=\"layer poster-layer\"></slot>\n  <slot name=\"gestures-chrome\" part=\"layer gesture-layer\">\n    <media-gesture-receiver slot=\"gestures-chrome\"></media-gesture-receiver>\n  </slot>\n  <span part=\"layer vertical-layer\">\n    <slot name=\"top-chrome\" part=\"top chrome\"></slot>\n    <slot name=\"middle-chrome\" part=\"middle chrome\"></slot>\n    <slot name=\"centered-chrome\" part=\"layer centered-layer center centered chrome\"></slot>\n    ${/* default, effectively \"bottom-chrome\" */''}\n    <slot part=\"bottom chrome\"></slot>\n  </span>\n`;\n\nconst MEDIA_UI_ATTRIBUTE_NAMES = Object.values(MediaUIAttributes);\n\nconst defaultBreakpoints = 'sm:384 md:576 lg:768 xl:960';\n\nconst resizeCallback = (entries) => {\n  for (const entry of entries) {\n    const container = entry.target;\n\n    if (!container.isConnected) continue;\n\n    const breakpoints = container.getAttribute('breakpoints') ?? defaultBreakpoints;\n    const ranges = createBreakpointMap(breakpoints);\n    const activeBreakpoints = getBreakpoints(ranges, entry.contentRect);\n\n    Object.keys(ranges).forEach((name) => {\n      if (activeBreakpoints.includes(name)) {\n        if (!container.hasAttribute(`breakpoint-${name}`)) {\n          container.setAttribute(`breakpoint-${name}`, '');\n        }\n        return;\n      }\n\n      container.removeAttribute(`breakpoint-${name}`);\n    });\n  }\n};\n\nfunction createBreakpointMap(breakpoints) {\n  const pairs = breakpoints.split(/\\s+/);\n  return Object.fromEntries(pairs.map((pair) => pair.split(':')));\n}\n\nfunction getBreakpoints(breakpoints, rect) {\n  return Object.keys(breakpoints).filter((name) => {\n    return rect.width >= breakpoints[name];\n  });\n}\n\n/**\n * @extends {HTMLElement}\n */\nclass MediaContainer extends window.HTMLElement {\n  constructor() {\n    super();\n\n    // Set up the Shadow DOM\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n    // Watch for child adds/removes and update the media element if necessary\n    const mutationCallback = (mutationsList) => {\n      const media = this.media;\n\n      for (let mutation of mutationsList) {\n        if (mutation.type === 'childList') {\n          // Media element being removed\n          mutation.removedNodes.forEach((node) => {\n            // Is this a direct child media element of media-controller?\n            // TODO: This accuracy doesn't matter after moving away from media attrs.\n            // Could refactor so we can always just call 'dispose' on any removed media el.\n            if (node.slot == 'media' && mutation.target == this) {\n              // Check if this was the current media by if it was the first\n              // el with slot=media in the child list. There could be multiple.\n              let previousSibling =\n                mutation.previousSibling &&\n                mutation.previousSibling.previousElementSibling;\n\n              // Must have been first if no prev sibling or new media\n              if (!previousSibling || !media) {\n                this.mediaUnsetCallback(node);\n              } else {\n                // Check if any prev siblings had a slot=media\n                // Should remain true otherwise\n                let wasFirst = previousSibling.slot !== 'media';\n                while (\n                  (previousSibling = previousSibling.previousSibling) !== null\n                ) {\n                  if (previousSibling.slot == 'media') wasFirst = false;\n                }\n                if (wasFirst) this.mediaUnsetCallback(node);\n              }\n            }\n          });\n\n          // Controls or media element being added\n          // No need to inject anything if media=null\n          if (media) {\n            mutation.addedNodes.forEach((node) => {\n              if (node == media) {\n                // Update all controls with new media if this is the new media\n                this.handleMediaUpdated(media).then((media) =>\n                  this.mediaSetCallback(media)\n                );\n              }\n            });\n          }\n        }\n      }\n    };\n\n    const mutationObserver = new MutationObserver(mutationCallback);\n    mutationObserver.observe(this, { childList: true, subtree: true });\n\n    const resizeObserver = new ResizeObserver(resizeCallback);\n    this.resizeObserver = resizeObserver;\n    resizeObserver.observe(this);\n\n    // Handles the case when the slotted media element is a slot element itself.\n    // e.g. chaining media slots for media themes.\n    let currentMedia = this.media;\n    /** @type {HTMLSlotElement} */\n    let chainedSlot = this.querySelector(':scope > slot[slot=media]');\n    if (chainedSlot) {\n      chainedSlot.addEventListener('slotchange', () => {\n        const slotEls = chainedSlot.assignedElements({ flatten: true });\n        if (!slotEls.length) {\n          this.mediaUnsetCallback(currentMedia);\n          return;\n        }\n        if (this.media) {\n          currentMedia = this.media\n          this.handleMediaUpdated(this.media).then((media) =>\n            this.mediaSetCallback(media)\n          );\n        }\n      });\n    }\n  }\n\n  static get observedAttributes() {\n    return ['autohide', 'gestures-disabled'].concat(MEDIA_UI_ATTRIBUTE_NAMES);\n  }\n\n  // Could share this code with media-chrome-html-element instead\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName.toLowerCase() == 'autohide') {\n      this.autohide = newValue;\n    }\n  }\n\n  // First direct child with slot=media, or null\n  /**\n   * @returns {HTMLVideoElement &\n   * {buffered,\n   * webkitEnterFullscreen?,\n   * webkitExitFullscreen?,\n   * requestCast?,\n   * webkitShowPlaybackTargetPicker?,\n   * }}\n   */\n  get media() {\n    /** @type {HTMLVideoElement} */\n    let media = this.querySelector(':scope > [slot=media]');\n\n    // Chaining media slots for media templates\n    if (media?.nodeName == 'SLOT')\n      // @ts-ignore\n      media = media.assignedElements({ flatten: true })[0];\n\n    return media;\n  }\n\n  mediaSetCallback(media) {\n    // Toggle play/pause with clicks on the media element itself\n    this._mediaClickPlayToggle = () => {\n      const eventName = media.paused\n        ? MediaUIEvents.MEDIA_PLAY_REQUEST\n        : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n      this.dispatchEvent(\n        new window.CustomEvent(eventName, { composed: true, bubbles: true })\n      );\n    };\n  }\n\n  handleMediaUpdated(media) {\n    const resolveMediaPromise = (media) => {\n      // media.addEventListener('click', this._mediaClickPlayToggle, false);\n\n      return Promise.resolve(media);\n    };\n\n    const rejectMediaPromise = (media) => {\n      console.error(\n        '<media-chrome>: Media element set with slot=\"media\" does not appear to be compatible.',\n        media\n      );\n      return Promise.reject(media);\n    };\n\n    // Anything \"falsy\" couldn't act as a media element. Reject.\n    if (!media) {\n      return rejectMediaPromise(media);\n    }\n\n    const mediaName = media.nodeName.toLowerCase();\n    // Custom element. Wait until it's defined before resolving\n    if (mediaName.includes('-')) {\n      return window.customElements.whenDefined(mediaName).then(() => {\n        return resolveMediaPromise(media);\n      });\n    }\n\n    // Exists and isn't a custom element. Resolve.\n    return resolveMediaPromise(media);\n  }\n\n  /**\n   * @abstract\n   */\n  mediaUnsetCallback(node) { // eslint-disable-line\n    // media.removeEventListener('click', this._mediaClickPlayToggle);\n  }\n\n  connectedCallback() {\n    const isAudioChrome = this.getAttribute('audio') != null;\n    const label = isAudioChrome ? nouns.AUDIO_PLAYER() : nouns.VIDEO_PLAYER();\n    this.setAttribute('role', 'region');\n    this.setAttribute('aria-label', label);\n\n    if (this.media) {\n      this.handleMediaUpdated(this.media).then((media) =>\n        this.mediaSetCallback(media)\n      );\n    }\n\n    // Assume user is inactive until they're not (aka user-inactive by default is true)\n    // This allows things like autoplay and programmatic playing to also initiate hiding controls (CJP)\n    this.setAttribute('user-inactive', 'user-inactive');\n\n    const setInactive = () => {\n      if (this.autohide < 0) return;\n      this.setAttribute('user-inactive', 'user-inactive');\n      const evt = new window.CustomEvent(\n        MediaStateChangeEvents.USER_INACTIVE,\n        { composed: true, bubbles: true, detail: true }\n      );\n      this.dispatchEvent(evt);\n    };\n\n    const setActive = () => {\n      this.removeAttribute('user-inactive');\n      const evt = new window.CustomEvent(\n        MediaStateChangeEvents.USER_INACTIVE,\n        { composed: true, bubbles: true, detail: false }\n      );\n      this.dispatchEvent(evt);\n    }\n\n    const scheduleInactive = () => {\n      setActive();\n\n      window.clearTimeout(this._inactiveTimeout);\n\n      // Setting autohide to -1 turns off autohide\n      if (this.autohide < 0) return;\n\n      this._inactiveTimeout = window.setTimeout(() => {\n        setInactive();\n      }, this.autohide * 1000);\n    };\n\n    // Unhide for keyboard controlling\n    this.addEventListener('keyup', () => {\n      scheduleInactive();\n    });\n\n    // when we get a tap, we want to unhide\n    this.addEventListener('pointerup', (e) => {\n      if (e.pointerType === 'touch') {\n        // @ts-ignore\n        if ([this, this.media].includes(e.target) && !this.hasAttribute('user-inactive')) {\n          setInactive();\n        } else {\n          scheduleInactive();\n        }\n      // @ts-ignore\n      } else if (e.composedPath().some(el => ['media-play-button', 'media-fullscreen-button'].includes(el?.nodeName?.toLowerCase()))) {\n        scheduleInactive();\n      }\n    });\n\n    this.addEventListener('pointermove', (e) => {\n      // pointermove doesn't happen with touch on taps on iOS, but does on android,\n      // so, only run pointermove for mouse\n      if (e.pointerType !== 'mouse') return;\n\n      if (e.target === this) return;\n\n      setActive();\n      // Stay visible if hovered over control bar\n      window.clearTimeout(this._inactiveTimeout);\n\n      // If hovering over something other than controls, we're free to make inactive\n      // @ts-ignore\n      if ([this, this.media].includes(e.target)) {\n        scheduleInactive();\n      }\n    });\n\n    // Immediately hide if mouse leaves the container\n    this.addEventListener('mouseleave', () => {\n      setInactive();\n    });\n\n    // Allow for focus styles only when using the keyboard to navigate\n    this.addEventListener('keyup', () => {\n      this.setAttribute('media-keyboard-control', '');\n    });\n    window.addEventListener('mouseup', () => {\n      this.removeAttribute('media-keyboard-control');\n    });\n  }\n\n  set autohide(seconds) {\n    seconds = Number(seconds);\n    this._autohide = isNaN(seconds) ? 0 : seconds;\n  }\n\n  get autohide() {\n    return this._autohide === undefined ? 2 : this._autohide;\n  }\n}\n\n// Aliasing media-controller to media-container in main index until we know\n// we're not breaking people with the change.\nif (!window.customElements.get('media-container-temp')) {\n  window.customElements.define('media-container-temp', MediaContainer);\n}\n\nexport default MediaContainer;\n", "export class AttributeTokenList {\n  #el;\n  #attr;\n  #tokens = new Set();\n\n  constructor(el, attr) {\n    this.#el = el;\n    this.#attr = attr;\n  }\n\n  [Symbol.iterator]() {\n    return this.#tokens.values();\n  }\n\n  get length() {\n    return this.#tokens.size;\n  }\n\n  get value() {\n    return [...this.#tokens].join(' ') ?? '';\n  }\n\n  set value(val) {\n    if (val === this.value) return;\n    this.#tokens = new Set();\n    this.add(...(val?.split(' ') ?? []));\n  }\n\n  toString() {\n    return this.value;\n  }\n\n  item(index) {\n    return [...this.#tokens][index];\n  }\n\n  values() {\n    return this.#tokens.values();\n  }\n\n  keys() {\n    return this.#tokens.keys();\n  }\n\n  forEach(callback) {\n    this.#tokens.forEach(callback);\n  }\n\n  add(...tokens) {\n    tokens.forEach((t) => this.#tokens.add(t));\n    // if the attribute was removed don't try to add it again.\n    if (this.value === '' && !this.#el?.hasAttribute(`${this.#attr}`)) {\n      return;\n    }\n    this.#el?.setAttribute(`${this.#attr}`, `${this.value}`);\n  }\n\n  remove(...tokens) {\n    tokens.forEach((t) => this.#tokens.delete(t));\n    this.#el?.setAttribute(`${this.#attr}`, `${this.value}`);\n  }\n\n  contains(token) {\n    return this.#tokens.has(token);\n  }\n\n  toggle(token, force) {\n    if (typeof force !== 'undefined') {\n      if (force) {\n        this.add(token);\n        return true;\n      } else {\n        this.remove(token);\n        return false;\n      }\n    }\n\n    if (this.contains(token)) {\n      this.remove(token);\n      return false;\n    }\n\n    this.add(token);\n    return true;\n  }\n\n  replace(oldToken, newToken) {\n    this.remove(oldToken);\n    this.add(newToken);\n  }\n}\n", "import { document } from './server-safe-globals.js';\n\nexport const fullscreenApi = {\n  enter: 'requestFullscreen',\n  exit: 'exitFullscreen',\n  event: 'fullscreenchange',\n  element: 'fullscreenElement',\n  error: 'fullscreenerror',\n  enabled: 'fullscreenEnabled',\n};\n\nif (document.fullscreenElement === undefined) {\n  fullscreenApi.enter = 'webkitRequestFullScreen';\n  fullscreenApi.exit =\n    document.webkitExitFullscreen != null\n      ? 'webkitExitFullscreen'\n      : 'webkitCancelFullScreen';\n  fullscreenApi.event = 'webkitfullscreenchange';\n  fullscreenApi.element = 'webkitFullscreenElement';\n  fullscreenApi.error = 'webkitfullscreenerror';\n  fullscreenApi.enabled = 'webkitFullscreenEnabled';\n}\n", "import { MediaUIEvents, MediaUIAttributes } from '../constants.js';\n\n// NOTE: This is generic for any CSS/html list representation. Consider renaming and moving to generic module.\n/**\n * Splits a string (representing TextTracks) into an array of strings based on whitespace.\n * @param {string} [textTracksStr = ''] - a string of 1+ \"items\" (representing TextTracks), separated by whitespace\n * @returns {Array<string>} An array of non-whitesace strings (each representing a single TextTrack).\n */\nexport const splitTextTracksStr = (textTracksStr = '') =>\n  textTracksStr.split(/\\s+/);\n\n/**\n * Parses a string that represents a TextTrack into a \"TextTrack-like object\"\n * The expected TextTrack string format is:\n * \"language[:label]\"\n * where the language *should* conform to BCP 47, just like TextTracks, and the (optional)\n * label *must* be URL encoded.\n * Note that this format may be expanded to include additional properties, such as\n * `id`.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack\n * @param {string} [textTrackStr = ''] - A well-defined TextTrack string representations\n * @returns {Object} An object that resembles a (partial) TextTrack (`{ language: string; label?: string; }`)\n */\nexport const parseTextTrackStr = (textTrackStr = '') => {\n  const [language, encodedLabel] = textTrackStr.split(':');\n  const label = encodedLabel ? decodeURIComponent(encodedLabel) : undefined;\n  return {\n    language,\n    label,\n  };\n};\n\n/**\n * Parses a whitespacae-separated string that represents list of TextTracks into an array of TextTrack-like objects,\n * where each object will have the properties identified by the corresponding string, plus any properties generically\n * provided by the (optional) `textTrackLikeObj` argument.\n * @param {string} [textTracksStr = ''] - a string of 1+ \"items\" (representing TextTracks), separated by whitespace\n * @param {Object} [textTrackLikeObj] An object that resembles a (partial) TextTrack, used to add generic properties to all parsed TextTracks.\n * @returns {Array<Object>} An array of \"TextTrack-like objects\", each with properties parsed from the string and any properties from `textTrackLikeObj`.\n * @example\n * ```js\n * const tracksStr = 'en-US:English en:English%20%28with%20descriptions%29';\n * const tracks = parseTextTracksStr(tracksStr);\n * // [{ language: 'en-US', label: 'English' }, { language: 'en', label: 'English (with descriptions)' }];\n *\n * const tracksData = { kind: 'captions' };\n * const tracksWithData = parseTextTracksStr(tracksStr, tracksData);\n * // [{ language: 'en-US', label: 'English', kind: 'captions' }, { language: 'en', label: 'English (with descriptions)', kind: 'captions' }];\n * ```\n */\nexport const parseTextTracksStr = (\n  textTracksStr = '',\n  textTrackLikeObj = {}\n) => {\n  return splitTextTracksStr(textTracksStr).map((textTrackStr) => {\n    const textTrackObj = parseTextTrackStr(textTrackStr);\n    return {\n      ...textTrackLikeObj,\n      ...textTrackObj,\n    };\n  });\n};\n\n/**\n * Takes a variety of possible representations of TextTrack(s) and \"normalizes\" them to an Array of 1+ TextTrack-like objects.\n * @param {Array<string|Object>|string|Object} trackOrTracks - A value representing 1+ TextTracks\n * @returns {Array<Object>} An array of TextTrack-like objects.\n */\nexport const parseTracks = (trackOrTracks) => {\n  // Already an array, but might be an array of strings, objects, or both.\n  if (Array.isArray(trackOrTracks)) {\n    return trackOrTracks.map((trackObjOrStr) => {\n      // If the individual track is a string representation, translate it into a TextTrack-like object.\n      if (typeof trackObjOrStr === 'string') {\n        return parseTextTrackStr(trackObjOrStr);\n      }\n      // Otherwise, assume it already is one.\n      return trackObjOrStr;\n    });\n  }\n  // A string of 1+ TextTrack representations. Parse into an array of objects.\n  if (typeof trackOrTracks === 'string') {\n    return parseTextTracksStr(trackOrTracks);\n  }\n  // Assume a single TextTrack-like object. Wrap into an array of 1.\n  return [trackOrTracks];\n};\n\n/**\n * Translates a TextTrack-like object into a well-defined string representation for the TextTrack\n * @param {Object} obj - A TextTrack or TextTrack-like object\n * @param {string} [obj.label] - An optional label for the track.\n * @param {string} [obj.language] - The BCP-47 compliant string representing the language code of the track\n * @returns {string} A string representing a TextTrack with the format: \"language[:label]\"\n */\nexport const formatTextTrackObj = ({ label, language } = {}) => {\n  if (!label) return language;\n  return `${language}:${encodeURIComponent(label)}`;\n};\n\n/**\n * Translates a set of TextTracks into a well-defined, whitespace-separated string representation of the set\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrackList\n * @param {Array<TextTrack|object>|TextTrackList} textTracks - A TextTracks object or an Array of TextTracks or TextTrack-like objects.\n * @returns A string representing a set of TextTracks, separated by whitespace.\n */\nexport const stringifyTextTrackList = (textTracks = []) => {\n  return Array.prototype.map.call(textTracks, formatTextTrackObj).join(' ');\n};\n\n// NOTE: This is a generic higher order fn. Consider and moving to generic module.\n/**\n * A generic higher-order function that yields a predicate to assert whether or not some value has the provided key/value pair\n * @param {string|number} key - The property key/name against which we'd like to match\n * @param {*} value - The value of the key we expect for a match\n * @returns {Function} - A predicate function that yields true if the provided object has the expected key/value pair, otherwise false.\n * @example\n * ```js\n * const hasShowingMode = isMatchingPropOf('mode', 'showing');\n * hasShowingMode({ mode: 'showing' }); // true\n * hasShowingMode({ mode: 'disabled' }); // false\n * hasShowingMode({ no_mode: 'any' }); // false\n * ```\n */\nexport const isMatchingPropOf = (key, value) => (obj) => obj[key] === value;\n\n// NOTE: This is a generic higher order fn. Consider renaming and moving to generic module.\n/**\n * A higher-order function that yields a single predicate to assert whether or not some value has *every* key/value pair defined in `filterObj`.\n * @param {object} filterObj - An object of key/value pairs that we expect on a given object\n * @returns {Function} - A predicate function that yields true iff the provided object has *every* key/value pair in `filterObj`, otherwise false\n * @example\n * ```js\n * const track1 = { label: 'English', kind: 'captions', language: 'en-US' };\n * const track1a = { label: 'English', kind: 'captions', language: 'en-US', id: '1', mode: 'showing' };\n * const track2 = { label: 'English (with descriptions)', kind: 'captions', language: 'en-US', id: '2', mode: 'disabled' };\n * const track3 = { label: 'Espa\u00F1ol', kind: 'subtitles', language: 'es-MX', id: '3', mode: 'disabled' };\n * const track4 = { label: 'English', language: 'en-US', mode: 'showing' };\n *\n * const isMatchingTrack = textTrackObjAsPred({ label: 'English', kind: 'captions', language: 'en-US' });\n * isMatchingTrack(track1); // true\n * isMatchingTrack(track1a); // true\n * isMatchingTrack(track2); // false\n * isMatchingTrack(track3); // false\n * isMatchingTrack(track4); // false\n * isMatchingTrack({ no_corresponding_props: 'any' }); // false\n * ```\n */\nexport const textTrackObjAsPred = (filterObj) => {\n  const preds = Object.entries(filterObj).map(([key, value]) => {\n    // Translate each key/value pair into a single predicate\n    return isMatchingPropOf(key, value);\n  });\n\n  // Return a predicate function that takes the array of single key/value pair predicates and asserts that *every* pred in the array is true of the (TextTrack-like) object\n  return (textTrack) => preds.every((pred) => pred(textTrack));\n};\n\n/**\n * Updates any `tracks` that match one of the `tracksToUpdate` to be in the provided TextTrack `mode`.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack/mode\n * @see {@link parseTracks}\n * @param {string} mode - The desired mode for any matching TextTracks. Should be one of \"disabled\"|\"hidden\"|\"showing\"\n * @param {TextTrackList|Array<TextTrack|Object>} tracks - A TextTracks object or array of TextTracks that should contain any matching TextTracks to update\n * @param {Array<string|Object>|string|Object} tracksToUpdate - A value representing a set of TextTracks\n */\nexport const updateTracksModeTo = (mode, tracks = [], tracksToUpdate = []) => {\n  // 1. Normalize the tracksToUpdate into an array of \"partial TextTrack-like\" objects\n  // 2. Convert each object into its own predicate function to identify that an actual TextTrack is a match\n  const preds = parseTracks(tracksToUpdate).map(textTrackObjAsPred);\n\n  // A track is identified as a track to update as long as it matches *one* of the preds (i.e. as long as it \"looks like\" one of \"partial TextTrack-like\" objects)\n  const isTrackToUpdate = (textTrack) => {\n    return preds.some((pred) => pred(textTrack));\n  };\n\n  Array.from(tracks)\n    // 1. Filter to only include tracks to update\n    .filter(isTrackToUpdate)\n    // 2. Update each of those tracks to the appropriate mode.\n    .forEach((textTrack) => {\n      textTrack.mode = mode;\n    });\n};\n\n/**\n * Takes an `HTMLMediaElement media` and yields an array of `TextTracks` that match the provided `filterPredOrObj` criteria (or all `TextTracks` by default).\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/textTracks\n * @see {@link textTrackObjAsPred}\n * @param {HTMLMediaElement} media - An HTMLMediaElement with an expected textTracks value\n * (NOTE: This uses \"structural polymorphism\", so as long as `media` has an Array-like `textTracks` value of TextTrack-like objects, this function will work).\n * @param {Function|Object} [filterPredOrObj] Either a predicate function or an object that can be translated into a predicate function of matching key/value pairs.\n * @returns {Array<TextTrack>} An array of TextTracks that match the given `filterPredOrObj` (or all TextTracks on `media` by default)\n * @example\n * ```html\n * <!DOCTYPE html>\n * <html lang=\"en\">\n * <head></head>\n * <body>\n * <video src=\"https://stream.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/high.mp4\">\n *   <track label=\"Spanish\" kind=\"subtitles\" srclang=\"es\" src=\"./vtt/en-sub.vtt\">\n *   <track label=\"English\" kind=\"subtitles\" srclang=\"en\" src=\"./vtt/es-sub.vtt\">\n *   <track label=\"English\" kind=\"captions\" srclang=\"en\" src=\"./vtt/en-cc.vtt\">\n  </video>\n * </body>\n * </html>\n * ```\n * ```js\n * // js ...\n * const media = document.querySelector('video');\n * getTextTracksList(media, { kind: 'subtitles' });\n * // [{ label: 'Spanish', kind: 'subtitles', language: 'es' }, { label: 'English', kind: 'subtitles', language: 'en' }]\n * getTextTracksList(media, { kind: 'captions' });\n * // [{ label: 'English', kind: 'captions', language: 'en' }]\n * getTextTracksList(media);\n * // [{ label: 'Spanish', kind: 'subtitles', language: 'es' }, { label: 'English', kind: 'subtitles', language: 'en' }, { label: 'English', kind: 'captions', language: 'en' }]\n * ```\n */\nexport const getTextTracksList = (media, filterPredOrObj = () => true) => {\n  if (!media?.textTracks) return [];\n\n  const filterPred =\n    typeof filterPredOrObj === 'function'\n      ? filterPredOrObj\n      : textTrackObjAsPred(filterPredOrObj);\n\n  return Array.from(media.textTracks).filter(filterPred);\n};\n\n\n/**\n * Are captions enabled?\n *\n * @param {HTMLElement} el - An HTMLElement that has caption related attributes on it.\n * @returns {boolean} Whether captions are enabled or not\n */\nexport const isCCOn = (el) => {\n  const showingCaptions = !!el.getAttribute(\n    MediaUIAttributes.MEDIA_CAPTIONS_SHOWING\n  );\n  const showingSubtitlesAsCaptions =\n    !el.hasAttribute('no-subtitles-fallback') &&\n    !!el.getAttribute(MediaUIAttributes.MEDIA_SUBTITLES_SHOWING);\n  return showingCaptions || showingSubtitlesAsCaptions;\n};\n\n/**\n * Trigger the appropriate event on the provided element that will toggle either captions or subtitles as appropriate.\n *\n * This was originally in media-captions-button.\n *\n * @param {HTMLElement} el - An HTMLElement that has caption related attributes on it.\n */\nexport const toggleSubsCaps = (el) => {\n  const ccIsOn = isCCOn(el);\n  if (ccIsOn) {\n    // Closed Captions is on. Clicking should disable any currently showing captions (and subtitles, if relevant)\n    // For why we are requesting tracks to `mode=\"disabled\"` and not `mode=\"hidden\"`, see: https://github.com/muxinc/media-chrome/issues/60\n    const captionsShowingStr = el.getAttribute(\n      MediaUIAttributes.MEDIA_CAPTIONS_SHOWING\n    );\n    // If we have currently showing captions track(s), request for them to be disabled.\n    if (captionsShowingStr) {\n      const evt = new window.CustomEvent(\n        MediaUIEvents.MEDIA_DISABLE_CAPTIONS_REQUEST,\n        { composed: true, bubbles: true, detail: captionsShowingStr }\n      );\n      el.dispatchEvent(evt);\n    }\n    const subtitlesShowingStr = el.getAttribute(\n      MediaUIAttributes.MEDIA_SUBTITLES_SHOWING\n    );\n    // If we have currently showing subtitles track(s) and we're using subtitle fallback (true/\"on\" by default), request for them to be disabled.\n    if (subtitlesShowingStr && !el.hasAttribute('no-subtitles-fallback')) {\n      const evt = new window.CustomEvent(\n        MediaUIEvents.MEDIA_DISABLE_SUBTITLES_REQUEST,\n        { composed: true, bubbles: true, detail: subtitlesShowingStr }\n      );\n      el.dispatchEvent(evt);\n    }\n  } else {\n    // Closed Captions is off. Clicking should show the first relevant captions track or subtitles track if we're using subtitle fallback (true/\"on\" by default)\n    const [ccTrackStr] =\n      splitTextTracksStr(\n        el.getAttribute(MediaUIAttributes.MEDIA_CAPTIONS_LIST) ?? ''\n      ) ?? [];\n    if (ccTrackStr) {\n      // If we have at least one captions track, request for the first one to be showing.\n      const evt = new window.CustomEvent(\n        MediaUIEvents.MEDIA_SHOW_CAPTIONS_REQUEST,\n        { composed: true, bubbles: true, detail: ccTrackStr }\n      );\n      el.dispatchEvent(evt);\n    } else if (!el.hasAttribute('no-subtitles-fallback')) {\n      // If we don't have a captions track and we're using subtitles fallback (true/\"on\" by default), check if we have any subtitles available.\n      const [subTrackStr] =\n        splitTextTracksStr(\n          el.getAttribute(MediaUIAttributes.MEDIA_SUBTITLES_LIST) ?? ''\n        ) ?? [];\n      if (subTrackStr) {\n        // If we have at least one subtitles track (and didn't have any captions tracks), request for the first one to be showing as a fallback for captions.\n        const evt = new window.CustomEvent(\n          MediaUIEvents.MEDIA_SHOW_SUBTITLES_REQUEST,\n          { composed: true, bubbles: true, detail: subTrackStr }\n        );\n        el.dispatchEvent(evt);\n      }\n    } else {\n      // If we end up here, it means we have an enabled CC-button that a user has clicked on but there are no captions and no subtitles (or we've disabled subtitles fallback).\n      console.error(\n        'Attempting to enable closed captions but none are available! Please verify your media content if this is unexpected.'\n      );\n    }\n  }\n};\n", "/*\n  The <media-chrome> can contain the control elements\n  and the media element. Features:\n  * Auto-set the `media` attribute on child media chrome elements\n    * Uses the element with slot=\"media\"\n  * Take custom controls to fullscreen\n  * Position controls at the bottom\n  * Auto-hide controls on inactivity while playing\n*/\nimport MediaContainer from './media-container.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { AttributeTokenList } from './utils/attribute-token-list.js';\nimport { fullscreenApi } from './utils/fullscreenApi.js';\nimport { constToCamel } from './utils/utils.js';\nimport { containsComposedNode } from './utils/element-utils.js';\nimport { toggleSubsCaps } from './utils/captions.js';\n\nimport {\n  MediaUIEvents,\n  MediaUIAttributes,\n  MediaStateReceiverAttributes,\n  TextTrackKinds,\n  TextTrackModes,\n  AvailabilityStates,\n  AttributeToStateChangeEventMap,\n  StreamTypes,\n} from './constants.js';\n\nconst StreamTypeValues = Object.values(StreamTypes);\n\nimport {\n  stringifyTextTrackList,\n  getTextTracksList,\n  updateTracksModeTo,\n} from './utils/captions.js';\n\nconst ButtonPressedKeys = ['ArrowLeft', 'ArrowRight', 'Enter', ' ', 'f', 'm', 'k', 'c'];\nconst DEFAULT_SEEK_OFFSET = 10;\nconst DEFAULT_TIME = 0;\n\n/**\n * Media Controller should not mimic the HTMLMediaElement API.\n * @see https://github.com/muxinc/media-chrome/pull/182#issuecomment-1067370339\n */\nclass MediaController extends MediaContainer {\n  static get observedAttributes() {\n    return super.observedAttributes.concat('nohotkeys', 'hotkeys', 'default-stream-type');\n  }\n\n  #hotKeys = new AttributeTokenList(this, 'hotkeys');\n  #fullscreenElement;\n\n  constructor() {\n    super();\n\n    if (!airplaySupported) {\n      this._airplayUnavailable = AvailabilityStates.UNSUPPORTED;\n    }\n    if (!fullscreenEnabled) {\n      this._fullscreenUnavailable = AvailabilityStates.UNAVAILABLE;\n    }\n    if (!castSupported) {\n      this._castUnavailable = AvailabilityStates.UNSUPPORTED;\n    }\n    if (!pipSupported) {\n      this._pipUnavailable = AvailabilityStates.UNSUPPORTED;\n    }\n    if (volumeSupported !== undefined) {\n      if (!volumeSupported) {\n        this._volumeUnavailable = AvailabilityStates.UNSUPPORTED;\n      }\n    } else {\n      volumeSupportPromise.then(() => {\n        if (!volumeSupported) {\n          this._volumeUnavailable = AvailabilityStates.UNSUPPORTED;\n          this.propagateMediaState(MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE, this._volumeUnavailable);\n        }\n      });\n    }\n\n    // Include this for styling convenience or exclude since it\n    // can be derived from MEDIA_CAPTIONS_LIST && MEDIA_SUBTITLES_LIST? (CJP)\n    // this._captionsUnavailable;\n\n    // Track externally associated control elements\n    this.mediaStateReceivers = [];\n    this.associatedElementSubscriptions = new Map();\n    this.associateElement(this);\n\n    // Capture request events from internal controls\n    const mediaUIEventHandlers = {\n      MEDIA_PLAY_REQUEST: (e, media) => {\n        const streamType = Delegates[MediaUIAttributes.MEDIA_STREAM_TYPE](this);\n        const autoSeekToLive = this.getAttribute('noautoseektolive') === null;\n\n        if (streamType == StreamTypes.LIVE && autoSeekToLive) {\n          mediaUIEventHandlers['MEDIA_SEEK_TO_LIVE_REQUEST'](e, media);\n        }\n\n        this.media.play().catch(() => {});\n      },\n      MEDIA_PAUSE_REQUEST: () => this.media.pause(),\n      MEDIA_MUTE_REQUEST: () => (this.media.muted = true),\n      MEDIA_UNMUTE_REQUEST: () => {\n        const media = this.media;\n\n        media.muted = false;\n\n        // Avoid confusion by bumping the volume on unmute\n        if (media.volume === 0) {\n          media.volume = 0.25;\n        }\n      },\n      MEDIA_VOLUME_REQUEST: (e) => {\n        const media = this.media;\n        const volume = e.detail;\n\n        media.volume = volume;\n\n        // If the viewer moves the volume we should unmute for them.\n        if (volume > 0 && media.muted) {\n          media.muted = false;\n        }\n\n        // Store the last set volume as a local preference, if ls is supported\n        try {\n          window.localStorage.setItem(\n            'media-chrome-pref-volume',\n            volume.toString()\n          );\n        } catch (err) {\n          // ignore\n        }\n      },\n\n      // This current assumes that the media controller is the fullscreen element\n      // which may be true in most cases but not all.\n      // The prior version of media-chrome supported alt fullscreen elements\n      // and that's something we can work towards here.\n      //\n      // Generally the fullscreen and PiP API's have the exit methods and enabled\n      // flags on the `document`. The active element is accessed on the document\n      // or shadow root but Safari doesn't support this.\n      // Entering fullscreen or PiP is called on the element. i.e.\n      //\n      //   - Document.exitFullscreen()\n      //   - Document.fullscreenEnabled\n      //   - Document.fullscreenElement / (ShadowRoot.fullscreenElement)\n      //   - Element.requestFullscreen()\n      //\n      MEDIA_ENTER_FULLSCREEN_REQUEST: () => {\n        if (!fullscreenEnabled) {\n          console.warn('Fullscreen support is unavailable; not entering fullscreen');\n          return;\n        }\n        const media = this.media;\n\n        if (document.pictureInPictureElement) {\n          // Should be async\n          document.exitPictureInPicture();\n        }\n\n        if (super[fullscreenApi.enter]) {\n          // Media chrome container fullscreen\n          this.fullscreenElement[fullscreenApi.enter]();\n        } else if (media.webkitEnterFullscreen) {\n          // Media element fullscreen using iOS API\n          media.webkitEnterFullscreen();\n        } else if (media.requestFullscreen) {\n          // Media element fullscreen, using correct API\n          // So media els don't have to implement multiple APIs.\n          media.requestFullscreen();\n        } else {\n          console.warn('MediaChrome: Fullscreen not supported');\n        }\n      },\n      MEDIA_EXIT_FULLSCREEN_REQUEST: () => {\n        document[fullscreenApi.exit]();\n      },\n      MEDIA_ENTER_PIP_REQUEST: () => {\n        const media = this.media;\n\n        if (!document.pictureInPictureEnabled) {\n          console.warn('MediaChrome: Picture-in-picture is not enabled');\n          // Placeholder for emitting a user-facing warning\n          return;\n        }\n\n        if (!media.requestPictureInPicture) {\n          console.warn('MediaChrome: The current media does not support picture-in-picture');\n          // Placeholder for emitting a user-facing warning\n          return;\n        }\n\n        // Exit fullscreen if needed\n        if (document[fullscreenApi.element]) {\n          document[fullscreenApi.exit]();\n        }\n\n        const warnNotReady = () => {\n          console.warn('MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.');\n        };\n\n        media.requestPictureInPicture().catch(err => {\n          // InvalidStateError, readyState == 0 (Not ready)\n          if (err.code === 11) {\n            // We can assume the viewer wants the video to load, so attempt to\n            // if we can rely on readyState and preload\n            // Only works in Chrome currently. Safari doesn't allow triggering\n            // in an event listener. Also requires readyState == 4.\n            // Firefox doesn't have the PiP API yet.\n            if (media.readyState === 0 && media.preload === 'none') {\n              const cleanup = () => {\n                media.removeEventListener('loadedmetadata', tryPip);\n                media.preload = 'none';\n              };\n\n              const tryPip = () => {\n                media.requestPictureInPicture().catch(warnNotReady);\n                cleanup();\n              };\n\n              media.addEventListener('loadedmetadata', tryPip);\n              media.preload = 'metadata';\n\n              // No easy way to know if this failed and we should clean up\n              // quickly if it doesn't to prevent an awkward delay for the user\n              setTimeout(()=>{\n                if (media.readyState === 0) warnNotReady();\n                cleanup();\n              }, 1000);\n            } else {\n              // Rethrow if unknown context\n              throw err;\n            }\n          } else {\n            // Rethrow if unknown context\n            throw err;\n          }\n        });\n      },\n      MEDIA_EXIT_PIP_REQUEST: () => {\n        if (document.pictureInPictureElement) {\n          // Should be async\n          document.exitPictureInPicture();\n        }\n      },\n      MEDIA_ENTER_CAST_REQUEST: () => {\n        const media = this.media;\n\n        if (!globalThis.CastableVideoElement?.castEnabled) return;\n\n        // Exit fullscreen if needed\n        if (document[fullscreenApi.element]) {\n          document[fullscreenApi.exit]();\n        }\n\n        // Open the browser cast menu.\n        // Note this relies on a customized video[is=castable-video] element.\n        media.requestCast();\n      },\n      MEDIA_EXIT_CAST_REQUEST: async () => {\n        if (globalThis.CastableVideoElement?.castElement) {\n          globalThis.CastableVideoElement.exitCast();\n        }\n      },\n      MEDIA_SEEK_REQUEST: (e) => {\n        const media = this.media;\n        const time = e.detail;\n\n        // Can't set the time before the media is ready\n        // Ignore if readyState isn't supported\n        if (media.readyState > 0 || media.readyState === undefined) {\n          media.currentTime = time;\n        }\n      },\n      MEDIA_PLAYBACK_RATE_REQUEST: (e) => {\n        this.media.playbackRate = e.detail;\n      },\n      MEDIA_PREVIEW_REQUEST: (e) => {\n        const media = this.media;\n        // No media (yet), so bail early\n        if (!media) return;\n\n        const time = e.detail;\n\n        // if time is null, then we're done previewing and want to remove the attributes\n        if (time === null) {\n          this.propagateMediaState(MediaUIAttributes.MEDIA_PREVIEW_TIME, undefined);\n        }\n        this.propagateMediaState(MediaUIAttributes.MEDIA_PREVIEW_TIME, time);\n\n        const [track] = getTextTracksList(media, {\n          kind: TextTrackKinds.METADATA,\n          label: 'thumbnails',\n        });\n        // No thumbnails track (yet) or no cues available in thumbnails track, so bail early.\n        if (!(track && track.cues)) return;\n\n        // if time is null, then we're done previewing and want to remove the attributes\n        if (time === null) {\n          this.propagateMediaState(MediaUIAttributes.MEDIA_PREVIEW_IMAGE, undefined);\n          this.propagateMediaState(MediaUIAttributes.MEDIA_PREVIEW_COORDS, undefined);\n          return;\n        }\n\n        const cue = Array.prototype.find.call(\n          track.cues,\n          (c) => c.startTime >= time\n        );\n\n        // No corresponding cue, so bail early\n        if (!cue) return;\n\n        // Since this isn't really \"global state\", we may want to consider moving this \"down\" to the component level,\n        // probably pulled out into its own module/set of functions (CJP)\n        const base = !/'^(?:[a-z]+:)?\\/\\//i.test(cue.text)\n          // @ts-ignore\n          ? media.querySelector('track[label=\"thumbnails\"]')?.src\n          : undefined;\n        const url = new URL(cue.text, base);\n        const previewCoordsStr = new URLSearchParams(url.hash).get('#xywh');\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_PREVIEW_IMAGE,\n          url.href\n        );\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_PREVIEW_COORDS,\n          previewCoordsStr.split(',').join(' ')\n        );\n      },\n      MEDIA_SHOW_CAPTIONS_REQUEST: (e) => {\n        const tracks = getCaptionTracks(this);\n        const { detail: tracksToUpdate = [] } = e;\n        updateTracksModeTo(TextTrackModes.SHOWING, tracks, tracksToUpdate);\n      },\n      // NOTE: We're currently recommending and providing default components that will \"disable\" tracks when\n      // we don't want them shown (rather than \"hiding\" them).\n      // For a discussion why, see: https://github.com/muxinc/media-chrome/issues/60\n      MEDIA_DISABLE_CAPTIONS_REQUEST: (e) => {\n        const tracks = getCaptionTracks(this);\n        const { detail: tracksToUpdate = [] } = e;\n        updateTracksModeTo(TextTrackModes.DISABLED, tracks, tracksToUpdate);\n      },\n      MEDIA_SHOW_SUBTITLES_REQUEST: (e) => {\n        const tracks = getSubtitleTracks(this);\n        const { detail: tracksToUpdate = [] } = e;\n        updateTracksModeTo(TextTrackModes.SHOWING, tracks, tracksToUpdate);\n      },\n      MEDIA_DISABLE_SUBTITLES_REQUEST: (e) => {\n        const tracks = getSubtitleTracks(this);\n        const { detail: tracksToUpdate = [] } = e;\n        updateTracksModeTo(TextTrackModes.DISABLED, tracks, tracksToUpdate);\n      },\n      MEDIA_AIRPLAY_REQUEST: () => {\n        const { media } = this;\n        if (!media) return;\n        if (\n          !(\n            media.webkitShowPlaybackTargetPicker &&\n            window.WebKitPlaybackTargetAvailabilityEvent\n          )\n        ) {\n          console.warn(\n            'received a request to select AirPlay but AirPlay is not supported in this environment'\n          );\n          return;\n        }\n        media.webkitShowPlaybackTargetPicker();\n      },\n      MEDIA_SEEK_TO_LIVE_REQUEST: (e, media) => {\n        const seekable = media.seekable;\n\n        if (!seekable) {\n          console.warn('MediaController: Media element does not support seeking to live.');\n          return;\n        }\n\n        if (!seekable.length) {\n          console.warn('MediaController: Media is unable to seek to live.');\n          return;\n        }\n\n        media.currentTime = seekable.end(seekable.length - 1);\n      }\n    };\n\n    // Apply ui event listeners\n    Object.keys(mediaUIEventHandlers).forEach((key) => {\n      const handlerName = `_handle${constToCamel(key, true)}`;\n\n      this[handlerName] = (e) => {\n        // Stop media UI events from continuing to bubble\n        e.stopPropagation();\n\n        if (!this.media) {\n          console.warn('MediaController: No media available.');\n          return;\n        }\n\n        mediaUIEventHandlers[key](e, this.media);\n      };\n      this.addEventListener(MediaUIEvents[key], this[handlerName]);\n    });\n\n    // Pass media state to child and associated control elements\n    this._mediaStatePropagators = {\n      'play,pause,emptied': () => {\n        this.propagateMediaState(MediaUIAttributes.MEDIA_PAUSED, getPaused(this));\n      },\n      'playing,emptied': () => {\n        // We want to let the user know that the media started playing at any point (`media-has-played`).\n        // Since these propagators are all called when boostrapping state, let's verify this is\n        // a real playing event by checking that 1) there's media and 2) it isn't currently paused.\n        this.propagateMediaState(MediaUIAttributes.MEDIA_HAS_PLAYED, !this.media?.paused);\n      },\n      volumechange: () => {\n        this.propagateMediaState(MediaUIAttributes.MEDIA_MUTED, getMuted(this));\n        this.propagateMediaState(MediaUIAttributes.MEDIA_VOLUME, getVolume(this));\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_VOLUME_LEVEL,\n          getVolumeLevel(this)\n        );\n      },\n      [fullscreenApi.event]: (e) => {\n        // Safari doesn't support ShadowRoot.fullscreenElement and document.fullscreenElement\n        // could be several ancestors up the tree. Use event.target instead.\n        const isSomeElementFullscreen = !!document[fullscreenApi.element];\n        const fullscreenEl = isSomeElementFullscreen && e?.target;\n        const isFullScreen = containsComposedNode(this.fullscreenElement, fullscreenEl);\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_IS_FULLSCREEN,\n          isFullScreen\n        );\n      },\n      'enterpictureinpicture,leavepictureinpicture': (e) => {\n        let isPip;\n\n        // Rely on event type for state first\n        // in case this doesn't work well for custom elements using internal <video>\n        if (e) {\n          isPip = e.type == 'enterpictureinpicture';\n        } else {\n          const pipElement =\n            // @ts-ignore\n            this.getRootNode().pictureInPictureElement ??\n            document.pictureInPictureElement;\n          isPip = this.media && containsComposedNode(this.media, pipElement);\n        }\n        this.propagateMediaState(MediaUIAttributes.MEDIA_IS_PIP, isPip);\n      },\n      // Note this relies on a customized video[is=castable-video] element.\n      'entercast,leavecast,castchange': (e) => {\n        const castElement = globalThis.CastableVideoElement?.castElement;\n        let castState = this.media && containsComposedNode(this.media, castElement);\n\n        // While the cast is connecting set media-is-cast=\"connecting\"\n        if (e?.type === 'castchange' && e?.detail === 'CONNECTING') {\n          castState = 'connecting';\n        }\n\n        this.propagateMediaState(MediaUIAttributes.MEDIA_IS_CASTING, castState);\n      },\n      'timeupdate,loadedmetadata': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_CURRENT_TIME,\n          getCurrentTime(this)\n        );\n      },\n      'durationchange,loadedmetadata,emptied': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_DURATION,\n          getDuration(this)\n        );\n      },\n      'emptied,durationchange,loadedmetadata,streamtypechange': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_STREAM_TYPE\n        );\n      },\n      'emptied,durationchange,loadedmetadata,streamtypechange,targetlivewindowchange': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_TARGET_LIVE_WINDOW\n        );\n      },\n      'loadedmetadata,emptied,progress': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_SEEKABLE,\n          getSeekable(this)?.join(':')\n        );\n      },\n      'progress,emptied': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_BUFFERED,\n          serializeTimeRanges(this.media?.buffered)\n        );\n      },\n      'ratechange,loadstart': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_PLAYBACK_RATE,\n          getPlaybackRate(this)\n        );\n      },\n      'waiting,playing,emptied': () => {\n        const isLoading = this.media?.readyState < 3;\n        this.propagateMediaState(MediaUIAttributes.MEDIA_LOADING, isLoading);\n      },\n      'playing,timeupdate,progress,waiting,emptied': () => {\n        this.propagateMediaState(MediaUIAttributes.MEDIA_TIME_IS_LIVE);\n      },\n    };\n\n    if (this._airplayUnavailable !== AvailabilityStates.UNSUPPORTED) {\n      const airplaySupporHandler = (event) => {\n        // NOTE: since we invoke all these event handlers without arguments whenever a media is attached,\n        // need to account for the possibility that event is undefined (CJP).\n        if (event?.availability === 'available') {\n          this._airplayUnavailable = undefined;\n        } else if (event?.availability === 'not-available') {\n          this._airplayUnavailable = AvailabilityStates.UNAVAILABLE;\n        }\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE,\n          this._airplayUnavailable\n        );\n      };\n      // NOTE: only adding this if airplay is supported, in part to avoid unnecessary battery consumption per\n      // Apple docs recommendations (See: https://developer.apple.com/documentation/webkitjs/adding_an_airplay_button_to_your_safari_media_controls)\n      // For a more advanced solution, we could monitor for media state receivers that \"care\" about airplay support and add/remove\n      // whenever these are added/removed. (CJP)\n      this._mediaStatePropagators['webkitplaybacktargetavailabilitychanged'] =\n        airplaySupporHandler;\n    }\n\n    if (this._castUnavailable !== AvailabilityStates.UNSUPPORTED) {\n      const castSupportHandler = () => {\n        // Cast state: NO_DEVICES_AVAILABLE, NOT_CONNECTED, CONNECTING, CONNECTED\n        const castState = globalThis.CastableVideoElement?.castState;\n        if (castState?.includes('CONNECT')) {\n          this._castUnavailable = undefined;\n        } else {\n          this._castUnavailable = AvailabilityStates.UNAVAILABLE;\n        }\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_CAST_UNAVAILABLE,\n          this._castUnavailable\n        );\n      };\n      // Note this relies on a customized video[is=castable-video] element.\n      this._mediaStatePropagators['castchange'] = castSupportHandler;\n    }\n\n    /**\n     * @TODO This and _mediaStatePropagators should be refactored to be less presumptuous about what is being\n     * monitored (and also probably how it's being monitored) (CJP)\n     */\n    this._textTrackMediaStatePropagators = {\n      'addtrack,removetrack,loadstart': () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_CAPTIONS_LIST,\n          stringifyTextTrackList(getCaptionTracks(this)) || undefined\n        );\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_SUBTITLES_LIST,\n          stringifyTextTrackList(getSubtitleTracks(this)) || undefined\n        );\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_CAPTIONS_SHOWING,\n          stringifyTextTrackList(getShowingCaptionTracks(this)) || undefined\n        );\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,\n          stringifyTextTrackList(getShowingSubtitleTracks(this)) || undefined\n        );\n      },\n      change: () => {\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_CAPTIONS_SHOWING,\n          stringifyTextTrackList(getShowingCaptionTracks(this)) || undefined\n        );\n        this.propagateMediaState(\n          MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,\n          stringifyTextTrackList(getShowingSubtitleTracks(this)) || undefined\n        );\n      },\n    };\n\n    this.enableHotkeys();\n  }\n\n  get fullscreenElement() {\n    return this.#fullscreenElement ?? this;\n  }\n\n  set fullscreenElement(element) {\n    if (this.hasAttribute('fullscreen-element')) {\n      this.removeAttribute('fullscreen-element');\n    }\n    this.#fullscreenElement = element;\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === 'nohotkeys') {\n      if (newValue !== oldValue && newValue === '') {\n        if (this.hasAttribute('hotkeys')) {\n          console.warn('Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled.');\n        }\n        this.disableHotkeys();\n      } else if (newValue !== oldValue && newValue === null) {\n        this.enableHotkeys();\n      }\n    } else if (attrName === 'hotkeys') {\n        this.#hotKeys.value = newValue;\n    } else if (attrName === 'default-stream-type') {\n      this.propagateMediaState(MediaUIAttributes.MEDIA_STREAM_TYPE);\n    } else if (attrName === 'fullscreen-element') {\n      const el = newValue \n        // @ts-ignore\n        ? this.getRootNode()?.getElementById(newValue) \n        : undefined;\n      // NOTE: Setting the internal private prop here to not\n      // clear the attribute that was just set (CJP).\n      this.#fullscreenElement = el;\n    }\n\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  mediaSetCallback(media) {\n    super.mediaSetCallback(media);\n\n    if (!media.hasAttribute('tabindex')) {\n      media.setAttribute('tabindex', -1);\n    }\n\n    // Listen for media state changes and propagate them to children and associated els\n    Object.keys(this._mediaStatePropagators).forEach((key) => {\n      const events = key.split(',');\n      const handler = this._mediaStatePropagators[key];\n\n      events.forEach((event) => {\n        // If this is fullscreen apply to the document\n        const target =\n          event == fullscreenApi.event ? this.getRootNode() : media;\n\n        target.addEventListener(event, handler);\n      });\n      handler();\n    });\n\n    Object.entries(this._textTrackMediaStatePropagators).forEach(\n      ([eventsStr, handler]) => {\n        const events = eventsStr.split(',');\n        events.forEach((event) => {\n          if (media.textTracks) {\n            media.textTracks.addEventListener(event, handler);\n          }\n        });\n        handler();\n      }\n    );\n\n    // Update the media with the last set volume preference\n    // This would preferably live with the media element,\n    // not a control.\n    try {\n      const volPref = window.localStorage.getItem('media-chrome-pref-volume');\n      if (volPref !== null) media.volume = volPref;\n    } catch (e) {\n      console.debug('Error getting volume pref', e);\n    }\n  }\n\n  mediaUnsetCallback(media) {\n    super.mediaUnsetCallback(media);\n\n    // Remove all state change propagators\n    Object.keys(this._mediaStatePropagators).forEach((key) => {\n      const events = key.split(',');\n      const handler = this._mediaStatePropagators[key];\n\n      events.forEach((event) => {\n        const target =\n          event == fullscreenApi.event ? this.getRootNode() : media;\n        target.removeEventListener(event, handler);\n      });\n    });\n\n    Object.entries(this._textTrackMediaStatePropagators).forEach(\n      ([eventsStr, handler]) => {\n        const events = eventsStr.split(',');\n        events.forEach((event) => {\n          if (media.textTracks) {\n            media.textTracks.removeEventListener(event, handler);\n          }\n        });\n        handler();\n      }\n    );\n\n    // Reset to paused state\n    this.propagateMediaState(MediaUIAttributes.MEDIA_PAUSED, true);\n  }\n\n  propagateMediaState(stateName, state) {\n    if (arguments.length === 1) {\n      state = Delegates[stateName](this);\n    }\n\n    propagateMediaState(this.mediaStateReceivers, stateName, state);\n    const evt = new window.CustomEvent(\n      AttributeToStateChangeEventMap[stateName],\n      { composed: true, bubbles: true, detail: state }\n    );\n    this.dispatchEvent(evt);\n  }\n\n  associateElement(element) {\n    if (!element) return;\n    const { associatedElementSubscriptions } = this;\n\n    if (associatedElementSubscriptions.has(element)) return;\n\n    const registerMediaStateReceiver =\n      this.registerMediaStateReceiver.bind(this);\n    const unregisterMediaStateReceiver =\n      this.unregisterMediaStateReceiver.bind(this);\n\n    /** @TODO Should we support \"removing association\" */\n    const unsubscribe = monitorForMediaStateReceivers(\n      element,\n      registerMediaStateReceiver,\n      unregisterMediaStateReceiver\n    );\n\n    // Add all media request event listeners to the Associated Element. This allows any DOM element that\n    // is a descendant of any Associated Element (including the <media-controller/> itself) to make requests\n    // for media state changes rather than constraining that exclusively to a Media State Receivers.\n    Object.keys(MediaUIEvents).forEach((key) => {\n      element.addEventListener(\n        MediaUIEvents[key],\n        this[`_handle${constToCamel(key, true)}`]\n      );\n    });\n\n    associatedElementSubscriptions.set(element, unsubscribe);\n  }\n\n  unassociateElement(element) {\n    if (!element) return;\n    const { associatedElementSubscriptions } = this;\n    if (!associatedElementSubscriptions.has(element)) return;\n    const unsubscribe = associatedElementSubscriptions.get(element);\n    unsubscribe();\n    associatedElementSubscriptions.delete(element);\n\n    // Remove all media UI event listeners\n    Object.keys(MediaUIEvents).forEach((key) => {\n      element.removeEventListener(\n        MediaUIEvents[key],\n        this[`_handle${constToCamel(key, true)}`]\n      );\n    });\n  }\n\n  registerMediaStateReceiver(el) {\n    if (!el) return;\n    const els = this.mediaStateReceivers;\n    const index = els.indexOf(el);\n    if (index > -1) return;\n\n    els.push(el);\n\n    // No media depedencies, so push regardless of media availability.\n    propagateMediaState(\n      [el],\n      MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE,\n      this._volumeUnavailable\n    );\n    propagateMediaState(\n      [el],\n      MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE,\n      this._airplayUnavailable\n    );\n    propagateMediaState(\n      [el],\n      MediaUIAttributes.MEDIA_FULLSCREEN_UNAVAILABLE,\n      this._fullscreenUnavailable\n    );\n    propagateMediaState(\n      [el],\n      MediaUIAttributes.MEDIA_CAST_UNAVAILABLE,\n      this._castUnavailable\n    );\n    propagateMediaState(\n      [el],\n      MediaUIAttributes.MEDIA_PIP_UNAVAILABLE,\n      this._pipUnavailable,\n    );\n\n    if (this.media) {\n      Object.keys(MediaUIAttributes).forEach((attribute) => {\n        // skip availability delegates as they were completed above\n        if (attribute.includes('UNAVAILABLE')) return;\n\n        propagateMediaState(\n          [el],\n          MediaUIAttributes[attribute],\n          Delegates[MediaUIAttributes[attribute]] ? Delegates[MediaUIAttributes[attribute]](this) : Delegates.default(this, MediaUIAttributes[attribute])\n        );\n      });\n    }\n  }\n\n  unregisterMediaStateReceiver(el) {\n    const els = this.mediaStateReceivers;\n\n    const index = els.indexOf(el);\n    if (index < 0) return;\n\n    els.splice(index, 1);\n  }\n\n  #keyUpHandler(e) {\n    const { key } = e;\n    if (!ButtonPressedKeys.includes(key)) {\n      this.removeEventListener('keyup', this.#keyUpHandler);\n      return;\n    }\n\n    this.keyboardShortcutHandler(e);\n  }\n\n  #keyDownHandler(e) {\n    const { metaKey, altKey, key } = e;\n    if (metaKey || altKey || !ButtonPressedKeys.includes(key)) {\n      this.removeEventListener('keyup', this.#keyUpHandler);\n      return;\n    }\n\n    // if the pressed key might move the page, we need to preventDefault on keydown\n    // because doing so on keyup is too late\n    // We also want to make sure that the hotkey hasn't been turned off before doing so\n    if (\n      [' ', 'ArrowLeft', 'ArrowRight'].includes(key) &&\n      !(this.#hotKeys.contains(`no${key.toLowerCase()}`) ||\n        key === ' ' && this.#hotKeys.contains('nospace'))\n    ) {\n      e.preventDefault();\n    }\n\n    this.addEventListener('keyup', this.#keyUpHandler, {once: true});\n  }\n\n  enableHotkeys() {\n    this.addEventListener('keydown', this.#keyDownHandler);\n  }\n\n  disableHotkeys() {\n    this.removeEventListener('keydown', this.#keyDownHandler);\n    this.removeEventListener('keyup', this.#keyUpHandler);\n  }\n\n  get hotkeys() {\n    return this.#hotKeys;\n  }\n\n  keyboardShortcutHandler(e) {\n    // if the event's key is already handled by the target, skip keyboard shortcuts\n    // keysUsed is either an attribute or a property.\n    // The attribute is a DOM array and the property is a JS array\n    // In the attribute Space represents the space key and gets convered to ' '\n    const keysUsed = (e.target.getAttribute('keysused')?.split(' ') ?? e.target?.keysUsed ?? [])\n      .map(key => key === 'Space' ? ' ' : key)\n      .filter(Boolean);\n\n    if (keysUsed.includes(e.key)) {\n      return;\n    }\n\n    let eventName, currentTimeStr, currentTime, detail, evt;\n    const seekOffset = DEFAULT_SEEK_OFFSET;\n\n    // if the blocklist contains the key, skip handling it.\n    if (this.#hotKeys.contains(`no${e.key.toLowerCase()}`)) return;\n    if (e.key === ' ' && this.#hotKeys.contains(`nospace`)) return;\n\n    // These event triggers were copied from the revelant buttons\n    switch (e.key) {\n      case ' ':\n      case 'k':\n        eventName =\n          this.getAttribute(MediaUIAttributes.MEDIA_PAUSED) != null\n            ? MediaUIEvents.MEDIA_PLAY_REQUEST\n            : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n        this.dispatchEvent(\n          new window.CustomEvent(eventName, { composed: true, bubbles: true })\n        );\n        break;\n\n      case 'm':\n        eventName =\n          this.getAttribute(MediaUIAttributes.MEDIA_VOLUME_LEVEL) === 'off'\n            ? MediaUIEvents.MEDIA_UNMUTE_REQUEST\n            : MediaUIEvents.MEDIA_MUTE_REQUEST;\n        this.dispatchEvent(\n          new window.CustomEvent(eventName, { composed: true, bubbles: true })\n        );\n        break;\n\n      case 'f':\n        eventName =\n          this.getAttribute(MediaUIAttributes.MEDIA_IS_FULLSCREEN) != null\n            ? MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST\n            : MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST;\n        this.dispatchEvent(\n          new window.CustomEvent(eventName, { composed: true, bubbles: true })\n        );\n        break;\n\n      case 'c':\n        toggleSubsCaps(this);\n        break;\n\n      case 'ArrowLeft':\n        currentTimeStr = this.getAttribute(\n          MediaUIAttributes.MEDIA_CURRENT_TIME\n        );\n        currentTime =\n          currentTimeStr && !Number.isNaN(+currentTimeStr)\n            ? +currentTimeStr\n            : DEFAULT_TIME;\n        detail = Math.max(currentTime - seekOffset, 0);\n        evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n          composed: true,\n          bubbles: true,\n          detail,\n        });\n        this.dispatchEvent(evt);\n        break;\n\n      case 'ArrowRight':\n        currentTimeStr = this.getAttribute(\n          MediaUIAttributes.MEDIA_CURRENT_TIME\n        );\n        currentTime =\n          currentTimeStr && !Number.isNaN(+currentTimeStr)\n            ? +currentTimeStr\n            : DEFAULT_TIME;\n        detail = Math.max(currentTime + seekOffset, 0);\n        evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n          composed: true,\n          bubbles: true,\n          detail,\n        });\n        this.dispatchEvent(evt);\n        break;\n\n      default:\n        break;\n    }\n  }\n}\n\nconst Delegates = {\n  default(el, attribute) {\n    return el.getAttribute(attribute);\n  },\n\n  [MediaUIAttributes.MEDIA_CAPTIONS_LIST](el) {\n    return stringifyTextTrackList(getCaptionTracks(el)) || undefined;\n  },\n\n  [MediaUIAttributes.MEDIA_SUBTITLES_LIST](el) {\n    return stringifyTextTrackList(getSubtitleTracks(el)) || undefined;\n  },\n\n  [MediaUIAttributes.MEDIA_SUBTITLES_LIST](el) {\n    return stringifyTextTrackList(getSubtitleTracks(el)) || undefined;\n  },\n\n  [MediaUIAttributes.MEDIA_CAPTIONS_SHOWING](el) {\n    return stringifyTextTrackList(getShowingCaptionTracks(el)) || undefined;\n  },\n\n  [MediaUIAttributes.MEDIA_PAUSED](el) {\n    return getPaused(el);\n  },\n\n  [MediaUIAttributes.MEDIA_MUTED](el) {\n    return getMuted(el);\n  },\n\n  [MediaUIAttributes.MEDIA_VOLUME](el) {\n    return getVolume(el);\n  },\n\n  [MediaUIAttributes.MEDIA_VOLUME_LEVEL](el) {\n    return getVolumeLevel(el);\n  },\n\n  [MediaUIAttributes.MEDIA_CURRENT_TIME](el) {\n    return getCurrentTime(el);\n  },\n\n  [MediaUIAttributes.MEDIA_DURATION](el) {\n    return getDuration(el);\n  },\n\n  [MediaUIAttributes.MEDIA_SEEKABLE](el) {\n    return getSeekable(el)?.join(':');\n  },\n\n  [MediaUIAttributes.MEDIA_PLAYBACK_RATE](el) {\n    return getPlaybackRate(el);\n  },\n\n  [MediaUIAttributes.MEDIA_STREAM_TYPE](el) {\n    return getStreamType(el);\n  },\n  [MediaUIAttributes.MEDIA_TARGET_LIVE_WINDOW](el) {\n    return getTargetLiveWindow(el);\n  },\n  [MediaUIAttributes.MEDIA_TIME_IS_LIVE](controller) {\n    const media = controller.media;\n    \n    if (!media) return false;\n    if (typeof media.liveEdgeStart === 'number') {\n      if (Number.isNaN(media.liveEdgeStart)) return false;\n      return media.currentTime >= media.liveEdgeStart;\n    }\n\n    const live = getStreamType(controller) === 'live';\n    // Can't be playing live if it's not a live stream\n    if (!live) return false;\n    \n    const seekable = media.seekable;\n    // If the slotted media element is live but does not expose a 'seekable' `TimeRanges` object,\n    // always assume playing live\n    if (!seekable) return true;\n    // If there is an empty `seekable`, assume we are not playing live\n    if (!seekable.length) return false;\n\n    // Default to 10 seconds\n    // Assuming seekable range already accounts for appropriate buffer room\n    const liveEdgeStartOffset = controller.hasAttribute('liveedgeoffset') \n      ? Number(controller.getAttribute('liveedgeoffset'))\n      : 10;\n    const liveEdgeStart = seekable.end(seekable.length - 1) - liveEdgeStartOffset\n    return media.currentTime >= liveEdgeStart;\n  },\n};\n\nconst getPaused = (controller) => {\n  if (!controller.media) return true;\n\n  return controller.media.paused;\n};\n\nconst getMuted = (controller) => {\n  return !!(controller.media && controller.media.muted);\n};\n\nconst getVolume = (controller) => {\n  const media = controller.media;\n\n  return media ? media.volume : 1;\n};\n\nconst getVolumeLevel = (controller) => {\n  let level = 'high';\n\n  if (!controller.media) return level;\n\n  const { muted, volume } = controller.media;\n\n  if (volume === 0 || muted) {\n    level = 'off';\n  } else if (volume < 0.5) {\n    level = 'low';\n  } else if (volume < 0.75) {\n    level = 'medium';\n  }\n\n  return level;\n};\n\nconst getCurrentTime = (controller) => {\n  const media = controller.media;\n\n  return media ? media.currentTime : 0;\n};\n\nconst getDuration = (controller) => {\n  const media = controller?.media;\n  if (!Number.isFinite(media?.duration)) return NaN;\n  return media.duration;\n};\n\nconst getSeekable = (controller) => {\n  const media = controller?.media;\n  if (!media?.seekable?.length) return undefined;\n  const start = media.seekable.start(0);\n  const end = media.seekable.end(media.seekable.length - 1);\n  // Account for cases where metadata from slotted media has an \"empty\" seekable (CJP)\n  if (!start && !end) return undefined;\n  return [Number(start.toFixed(3)), Number(end.toFixed(3))];\n};\n\nconst getPlaybackRate = (controller) => {\n  const media = controller.media;\n\n  return media ? media.playbackRate : 1;\n};\n\nconst getSubtitleTracks = (controller) => {\n  return getTextTracksList(controller.media, { kind: TextTrackKinds.SUBTITLES });\n};\n\nconst getCaptionTracks = (controller) => {\n  return getTextTracksList(controller.media, { kind: TextTrackKinds.CAPTIONS });\n};\n\nconst getShowingSubtitleTracks = (controller) => {\n  return getTextTracksList(controller.media, {\n    kind: TextTrackKinds.SUBTITLES,\n    mode: TextTrackModes.SHOWING,\n  });\n};\n\nconst getShowingCaptionTracks = (controller) => {\n  return getTextTracksList(controller.media, {\n    kind: TextTrackKinds.CAPTIONS,\n    mode: TextTrackModes.SHOWING,\n  });\n};\n\nconst getStreamType = (controller) => {\n  const { media } = controller;\n\n  if (!media) return undefined;\n\n  const { streamType } = media;\n  if (StreamTypeValues.includes(streamType)) {\n    // If the slotted media supports `streamType` but\n    // `streamType` is \"unknown\", prefer `default-stream-type`\n    // if set (CJP)\n    if (streamType === StreamTypes.UNKNOWN) {\n      const defaultType = controller.getAttribute('default-stream-type');\n      if ([StreamTypes.LIVE, StreamTypes.ON_DEMAND].includes(defaultType)) {\n        return defaultType;\n      }\n      return undefined;\n    }\n    return streamType;\n  }\n  const duration = media.duration;\n\n  if (duration === Infinity) {\n    return StreamTypes.LIVE;\n  } else if (Number.isFinite(duration)) {\n    return StreamTypes.ON_DEMAND;\n  } else {\n    const defaultType = controller.getAttribute('default-stream-type');\n\n    if ([StreamTypes.LIVE, StreamTypes.ON_DEMAND].includes(defaultType)) {\n      return defaultType;\n    }\n  }\n\n  return undefined;\n};\n\nconst getTargetLiveWindow = (controller) => {\n  const { media } = controller;\n\n  if (!media) return Number.NaN;\n  const { targetLiveWindow } = media;\n  // Since `NaN` represents either \"unknown\" or \"inapplicable\", need to check if `streamType`\n  // is `\"live\"`. If so, assume it's \"standard live\" (aka `targetLiveWindow === 0`) (CJP)\n  if (\n    (targetLiveWindow == null || Number.isNaN(targetLiveWindow)) &&\n    getStreamType(controller) === StreamTypes.LIVE\n  ) {\n    return 0;\n  }\n  return targetLiveWindow;\n};\n\nconst MEDIA_UI_ATTRIBUTE_NAMES = Object.values(MediaUIAttributes);\n\nconst getMediaUIAttributesFrom = (child) => {\n  let { observedAttributes } = child.constructor;\n\n  // observedAttributes are only available if the custom element was upgraded.\n  // example: media-gesture-receiver in the shadow DOM requires an upgrade.\n  if (!observedAttributes && child.nodeName?.includes('-')) {\n    window.customElements.upgrade(child);\n    ({ observedAttributes } = child.constructor);\n  }\n\n  const mediaChromeAttributesList = child\n    ?.getAttribute?.(MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES)\n    ?.split?.(/\\s+/);\n  if (!Array.isArray(observedAttributes || mediaChromeAttributesList))\n    return [];\n  return (observedAttributes || mediaChromeAttributesList).filter((attrName) =>\n    MEDIA_UI_ATTRIBUTE_NAMES.includes(attrName)\n  );\n};\n\nconst isMediaStateReceiver = (child) => {\n  return !!getMediaUIAttributesFrom(child).length;\n};\n\nconst setAttr = async (child, attrName, attrValue) => {\n  // If the node is not connected to the DOM yet wait on macrotask. Fix for:\n  //   Uncaught DOMException: Failed to construct 'CustomElement':\n  //   The result must not have attributes\n  if (!child.isConnected) {\n    await delay(0);\n  }\n\n  if (attrValue == undefined) {\n    return child.removeAttribute(attrName);\n  }\n  if (typeof attrValue === 'boolean') {\n    if (attrValue) return child.setAttribute(attrName, '');\n    return child.removeAttribute(attrName);\n  }\n  if (Number.isNaN(attrValue)) {\n    return child.removeAttribute(attrName);\n  }\n  return child.setAttribute(attrName, attrValue);\n};\n\nconst isMediaSlotElementDescendant = (el) => !!el.closest?.('*[slot=\"media\"]');\n\n/**\n *\n * @description This function will recursively check for any descendants (including the rootNode)\n * that are Media State Receivers and invoke `mediaStateReceiverCallback` with any Media State Receiver\n * found\n *\n * @param {HTMLElement} rootNode\n * @param {function} mediaStateReceiverCallback\n */\nconst traverseForMediaStateReceivers = (\n  rootNode,\n  mediaStateReceiverCallback\n) => {\n  // We (currently) don't check if descendants of the `media` (e.g. <video/>) are Media State Receivers\n  // See also: `propagateMediaState`\n  if (isMediaSlotElementDescendant(rootNode)) {\n    return;\n  }\n\n  const traverseForMediaStateReceiversSync = (\n    rootNode,\n    mediaStateReceiverCallback\n  ) => {\n    // The rootNode is itself a Media State Receiver\n    if (isMediaStateReceiver(rootNode)) {\n      mediaStateReceiverCallback(rootNode);\n    }\n\n    const { children = [] } = rootNode ?? {};\n    const shadowChildren = rootNode?.shadowRoot?.children ?? [];\n    const allChildren = [...children, ...shadowChildren];\n\n    // Traverse all children (including shadowRoot children) to see if they are/have Media State Receivers\n    allChildren.forEach((child) =>\n      traverseForMediaStateReceivers(child, mediaStateReceiverCallback)\n    );\n  };\n\n  // Custom Elements (and *only* Custom Elements) must have a hyphen (\"-\") in their name. So, if the rootNode is\n  // a custom element (aka has a hyphen in its name), wait until it's defined before attempting traversal to determine\n  // whether or not it or its descendants are Media State Receivers.\n  // IMPORTANT NOTE: We're intentionally *always* waiting for the `whenDefined()` Promise to resolve here\n  // (instead of using `window.customElements.get(name)` to check if a custom element is already defined/registered)\n  // because we encountered some reliability issues with the custom element instances not being fully \"ready\", even if/when\n  // they are available in the registry via `window.customElements.get(name)`.\n  const name = rootNode?.nodeName.toLowerCase();\n  if (name.includes('-') && !isMediaStateReceiver(rootNode)) {\n    window.customElements.whenDefined(name).then(() => {\n      // Try/traverse again once the custom element is defined\n      traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n    });\n    return;\n  }\n\n  traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n};\n\nconst propagateMediaState = (els, stateName, val) => {\n  els.forEach((el) => {\n    const relevantAttrs = getMediaUIAttributesFrom(el);\n    if (!relevantAttrs.includes(stateName)) return;\n    setAttr(el, stateName, val);\n  });\n};\n\n/**\n *\n * @description This function will monitor the rootNode for any Media State Receiver descendants\n * that are already present, added, or removed, invoking the relevant callback function for each\n * case.\n *\n * @param {HTMLElement} rootNode\n * @param {function} registerMediaStateReceiver\n * @param {function} unregisterMediaStateReceiver\n * @returns An unsubscribe method, used to stop monitoring descendants of rootNode and to unregister its descendants\n *\n */\nconst monitorForMediaStateReceivers = (\n  rootNode,\n  registerMediaStateReceiver,\n  unregisterMediaStateReceiver\n) => {\n  // First traverse the tree to register any current Media State Receivers\n  traverseForMediaStateReceivers(rootNode, registerMediaStateReceiver);\n\n  // Monitor for any event-based requests from descendants to register/unregister as a Media State Receiver\n  const registerMediaStateReceiverHandler = (evt) => {\n    const el = evt?.composedPath()[0] ?? evt.target;\n    registerMediaStateReceiver(el);\n  };\n\n  const unregisterMediaStateReceiverHandler = (evt) => {\n    const el = evt?.composedPath()[0] ?? evt.target;\n    unregisterMediaStateReceiver(el);\n  };\n\n  rootNode.addEventListener(\n    MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,\n    registerMediaStateReceiverHandler\n  );\n  rootNode.addEventListener(\n    MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,\n    unregisterMediaStateReceiverHandler\n  );\n\n  // Observe any changes to the DOM for any descendants that are identifiable as Media State Receivers\n  // and register or unregister them, depending on the change that occurred.\n  const mutationCallback = (mutationsList) => {\n    mutationsList.forEach((mutationRecord) => {\n      const {\n        addedNodes = [],\n        removedNodes = [],\n        type,\n        target,\n        attributeName,\n      } = mutationRecord;\n      if (type === 'childList') {\n        // For each added node, register any Media State Receiver descendants (including itself)\n        Array.prototype.forEach.call(addedNodes, (node) =>\n          traverseForMediaStateReceivers(node, registerMediaStateReceiver)\n        );\n        // For each removed node, unregister any Media State Receiver descendants (including itself)\n        Array.prototype.forEach.call(removedNodes, (node) =>\n          traverseForMediaStateReceivers(node, unregisterMediaStateReceiver)\n        );\n      } else if (\n        type === 'attributes' &&\n        attributeName === MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES\n      ) {\n        if (isMediaStateReceiver(target)) {\n          // Changed from a \"non-Media State Receiver\" to a Media State Receiver: register it.\n          registerMediaStateReceiver(target);\n        } else {\n          // Changed from a Media State Receiver to a \"non-Media State Receiver\": unregister it.\n          unregisterMediaStateReceiver(target);\n        }\n      }\n    });\n  };\n\n  const observer = new MutationObserver(mutationCallback);\n  observer.observe(rootNode, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n  });\n\n  const unsubscribe = () => {\n    // Unregister any Media State Receiver descendants (including ourselves)\n    traverseForMediaStateReceivers(rootNode, unregisterMediaStateReceiver);\n    // Stop observing for Media State Receivers\n    observer.disconnect();\n    // Stop listening for Media State Receiver events.\n    rootNode.removeEventListener(\n      MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,\n      registerMediaStateReceiverHandler\n    );\n    rootNode.removeEventListener(\n      MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,\n      unregisterMediaStateReceiverHandler\n    );\n  };\n\n  return unsubscribe;\n};\n\nlet testMediaEl;\nexport const getTestMediaEl = () => {\n  if (testMediaEl) return testMediaEl;\n  testMediaEl = document?.createElement?.('video');\n  return testMediaEl;\n};\n\nexport const hasVolumeSupportAsync = async (mediaEl = getTestMediaEl()) => {\n  if (!mediaEl) return false;\n  const prevVolume = mediaEl.volume;\n  mediaEl.volume = prevVolume / 2 + 0.1;\n  await delay(0);\n  return mediaEl.volume !== prevVolume;\n};\n\n/**\n * Returns a promise that will resolve after passed ms.\n * @param  {number} ms\n * @return {Promise}\n */\nexport const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nexport const hasPipSupport = (mediaEl = getTestMediaEl()) =>\n  typeof mediaEl?.requestPictureInPicture === 'function';\n\nconst pipSupported = hasPipSupport();\n\nlet volumeSupported;\nconst volumeSupportPromise = hasVolumeSupportAsync().then((supported) => {\n  volumeSupported = supported;\n  return volumeSupported;\n});\n\nconst airplaySupported = !!window.WebKitPlaybackTargetAvailabilityEvent;\nconst castSupported = !!window.chrome;\n\nexport const hasFullscreenSupport = (mediaEl = getTestMediaEl()) => {\n  let fullscreenEnabled = document[fullscreenApi.enabled];\n\n  if (!fullscreenEnabled && mediaEl) {\n    fullscreenEnabled = 'webkitSupportsFullscreen' in mediaEl;\n  }\n\n  return fullscreenEnabled;\n};\nconst fullscreenEnabled = hasFullscreenSupport();\n\n\n/** @type {TimeRanges} */\nconst emptyTimeRanges = Object.freeze({\n  length: 0,\n  start(index) {\n    const unsignedIdx = index >>> 0;\n    if (unsignedIdx >= this.length) {\n      throw new DOMException(\n        `Failed to execute 'start' on 'TimeRanges': The index provided (${unsignedIdx}) is greater than or equal to the maximum bound (${this.length}).`\n      );\n    }\n    return 0;\n  },\n  end(index) {\n    const unsignedIdx = index >>> 0;\n    if (unsignedIdx >= this.length) {\n      throw new DOMException(\n        `Failed to execute 'end' on 'TimeRanges': The index provided (${unsignedIdx}) is greater than or equal to the maximum bound (${this.length}).`\n      );\n    }\n    return 0;\n  },\n});\n\n/**\n * @argument {TimeRanges} [timeRanges]\n */\nfunction serializeTimeRanges(timeRanges = emptyTimeRanges) {\n  // @ts-ignore\n  return Array.from(timeRanges)\n    .map((_, i) => [\n      Number(timeRanges.start(i).toFixed(3)),\n      Number(timeRanges.end(i).toFixed(3)),\n    ].join(':'))\n    .join(' ');\n}\n\nif (!window.customElements.get('media-controller')) {\n  window.customElements.define('media-controller', MediaController);\n}\n\nexport default MediaController;\n", "import { MediaStateReceiverAttributes } from './constants.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { getOrInsertCSSRule } from './utils/element-utils.js';\n\nconst template = document.createElement('template');\n\n// Can't comma-separate selectors like ::-webkit-slider-thumb, ::-moz-range-thumb\n// Browsers ignore the whole rule if you do. So using templates for those.\nconst thumbStyles = `\n  height: var(--thumb-height);\n  width: var(--media-range-thumb-width, 10px);\n  border: var(--media-range-thumb-border, none);\n  border-radius: var(--media-range-thumb-border-radius, 10px);\n  background: var(--media-range-thumb-background, #fff);\n  box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n  cursor: pointer;\n  transition: var(--media-range-thumb-transition, none);\n  transform: var(--media-range-thumb-transform, none);\n  opacity: var(--media-range-thumb-opacity, 1);\n`;\n\nconst trackStyles = `\n  min-width: 40px;\n  height: var(--track-height);\n  border: var(--media-range-track-border, none);\n  outline: var(--media-range-track-outline);\n  outline-offset: var(--media-range-track-outline-offset);\n  border-radius: var(--media-range-track-border-radius, 0);\n  background: var(--media-range-track-progress-internal, var(--media-range-track-background, #eee));\n  box-shadow: var(--media-range-track-box-shadow, none);\n  transition: var(--media-range-track-transition, none);\n  transform: translate(var(--media-range-track-translate-x, 0), var(--media-range-track-translate-y, 0));\n  cursor: pointer;\n`;\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n      --thumb-height: var(--media-range-thumb-height, 10px);\n      --track-height: var(--media-range-track-height, 4px);\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgba(27, 127, 204, 0.9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      vertical-align: middle;\n      box-sizing: border-box;\n      display: inline-block;\n      position: relative;\n      background: var(--media-control-background, rgba(20,20,30, 0.7));\n      transition: background 0.15s linear;\n      width: 100px;\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n      pointer-events: auto;\n      ${/* needed for vertical align issue 1px off */''}\n      font-size: 0;\n      box-shadow: var(--_focus-visible-box-shadow, none);\n    }\n\n    ${/* Reset before `outline` on track could be set by a CSS var */''}\n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgba(50,50,60, 0.7));\n    }\n\n    #container {\n      position: relative;\n      height: 100%;\n    }\n\n    input[type=range] {\n      ${/* Reset */''}\n      -webkit-appearance: none; ${/* Hides the slider so that custom slider can be made */''}\n      background: transparent; ${/* Otherwise white in Chrome */''}\n\n      ${/* Fill host with the range */''}\n      min-height: 100%;\n      width: var(--media-range-track-width, 100%); ${/* Specific width is required for Firefox. */''}\n\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n    }\n\n    ${/* Special styling for WebKit/Blink */''}\n    input[type=range]::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ${thumbStyles}\n      ${/* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */''}\n      margin-top: calc(calc(0px - var(--thumb-height) + var(--track-height)) / 2);\n    }\n\n    ${/* The thumb is not positioned relative to the track in Firefox */''}\n    input[type=range]::-moz-range-thumb {\n      ${thumbStyles}\n      translate: var(--media-range-track-translate-x, 0) var(--media-range-track-translate-y, 0);\n    }\n\n    input[type=range]::-webkit-slider-runnable-track { ${trackStyles} }\n    input[type=range]::-moz-range-track { ${trackStyles} }\n    input[type=range]::-ms-track {\n      ${/* Reset */''}\n      width: 100%;\n      cursor: pointer;\n      ${/* Hides the slider so custom styles can be added */''}\n      background: transparent;\n      border-color: transparent;\n      color: transparent;\n\n      ${trackStyles}\n    }\n\n    #background,\n    #pointer {\n      min-width: 40px;\n      width: var(--media-range-track-width, 100%);\n      height: var(--track-height);\n      border-radius: var(--media-range-track-border-radius, 0);\n      position: absolute;\n      top: 50%;\n      transform: translate(var(--media-range-track-translate-x, 0px), calc(var(--media-range-track-translate-y, 0px) - 50%));\n      background: var(--media-range-track-background, #333);\n    }\n\n    #pointer {\n      min-width: auto;\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:hover) #pointer {\n      transition: visibility .5s, opacity .5s;\n      visibility: visible;\n      opacity: 1;\n    }\n\n    #hoverzone {\n      ${/* Add z-index so it overlaps the top of the control buttons if they are right under. */''}\n      z-index: 1;\n      display: var(--media-time-range-hover-display, none);\n      position: absolute;\n      width: 100%;\n      bottom: var(--media-time-range-hover-bottom, -5px);\n      height: var(--media-time-range-hover-height, max(calc(100% + 5px), 20px));\n    }\n\n    #range {\n      z-index: 2;\n      position: relative;\n      height: var(--media-range-track-height, 4px);\n    }\n\n    input[type=range]:disabled::-webkit-slider-thumb {\n      background-color: #777;\n    }\n\n    input[type=range]:disabled::-webkit-slider-runnable-track {\n      background-color: #777;\n    }\n  </style>\n  <div id=\"container\">\n    <div id=\"background\"></div>\n    <div id=\"pointer\"></div>\n    <div id=\"hoverzone\"></div>\n    <input id=\"range\" type=\"range\" min=\"0\" max=\"1000\" step=\"any\" value=\"0\">\n  </div>\n`;\n\n/**\n * @extends {HTMLElement}\n */\nclass MediaChromeRange extends window.HTMLElement {\n  #thumbWidth;\n  #mediaController;\n\n  static get observedAttributes() {\n    return [\n      'disabled',\n      'aria-disabled',\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n    style.setProperty('display', `var(--media-control-display, var(--${this.localName}-display, inline-block))`);\n\n    this.container = this.shadowRoot.querySelector('#container');\n    /** @type {Omit<HTMLInputElement, \"value\" | \"min\" | \"max\"> &\n      * {value: number, min: number, max: number}} */\n    this.range = this.shadowRoot.querySelector('#range');\n    this.range.addEventListener('input', this.updateBar.bind(this));\n\n    this.#thumbWidth = parseInt(getComputedStyle(this).getPropertyValue('--media-range-thumb-width') || '10', 10);\n  }\n\n  #onFocusIn = () => {\n    if (this.range.matches(':focus-visible')) {\n      const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n      style.setProperty('--_focus-visible-box-shadow', 'var(--_focus-box-shadow)');\n    }\n  }\n\n  #onFocusOut = () => {\n    const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n    style.removeProperty('--_focus-visible-box-shadow');\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    } else if (\n      attrName === 'disabled' ||\n      attrName === 'aria-disabled' &&\n      oldValue !== newValue\n    ) {\n      if (newValue == null) {\n        this.range.removeAttribute(attrName);\n      } else {\n        this.range.setAttribute(attrName, newValue);\n      }\n    }\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n\n    this.updateBar();\n\n    this.shadowRoot.addEventListener('focusin', this.#onFocusIn);\n    this.shadowRoot.addEventListener('focusout', this.#onFocusOut);\n  }\n\n  disconnectedCallback() {\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n\n    this.shadowRoot.removeEventListener('focusin', this.#onFocusIn);\n    this.shadowRoot.removeEventListener('focusout', this.#onFocusOut);\n  }\n\n  updatePointerBar(evt) {\n    // Get mouse position percent\n    const rangeRect = this.range.getBoundingClientRect();\n    let mousePercent = (evt.clientX - rangeRect.left) / rangeRect.width;\n    // Lock between 0 and 1\n    mousePercent = Math.max(0, Math.min(1, mousePercent));\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, '#pointer');\n    style.setProperty('width', `${mousePercent * rangeRect.width}px`);\n  }\n\n  /*\n    Native ranges have a single color for the whole track, which is different\n    from most video players that have a colored \"bar\" to the left of the handle\n    showing playback progress or volume level. Here we're building that bar\n    by using a background gradient that moves with the range value.\n  */\n  updateBar() {\n    const colorArray = this.getBarColors();\n\n    let gradientStr = 'linear-gradient(to right, ';\n    /** @type {number|string} */\n    let prevPercent = 0;\n    colorArray.forEach((color) => {\n      if (color[1] < prevPercent) return;\n      gradientStr =\n        gradientStr + `${color[0]} ${prevPercent}%, ${color[0]} ${color[1]}%,`;\n      prevPercent = color[1];\n    });\n    gradientStr = gradientStr.slice(0, gradientStr.length - 1) + ')';\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, '#range');\n    style.setProperty('--media-range-track-progress-internal', gradientStr);\n  }\n\n  /*\n    Build the color gradient for the range bar.\n    Creating an array so progress-bar can insert the buffered bar.\n  */\n  getBarColors() {\n    const range = this.range;\n    const relativeValue = range.value - range.min;\n    const relativeMax = range.max - range.min;\n    const rangePercent = (relativeValue / relativeMax) * 100;\n\n    let thumbPercent = 0;\n    // If the range thumb is at min or max don't correct the time range.\n    // Ideally the thumb center would go all the way to min and max values\n    // but input[type=range] doesn't play like that.\n    if (range.value > range.min && range.value < range.max) {\n      const thumbOffset = this.#thumbWidth * (0.5 - rangePercent / 100);\n      thumbPercent = (thumbOffset / range.offsetWidth) * 100;\n    }\n\n    let colorArray = [\n      ['var(--media-range-bar-color, #fff)', rangePercent + thumbPercent],\n      ['var(--media-range-track-color, transparent)', 100],\n    ];\n\n    return colorArray;\n  }\n\n  get keysUsed() {\n    return ['ArrowUp', 'ArrowRight', 'ArrowDown', 'ArrowLeft'];\n  }\n}\n\nif (!window.customElements.get('media-chrome-range')) {\n  window.customElements.define('media-chrome-range', MediaChromeRange);\n}\n\nexport default MediaChromeRange;\n", "/*\n  <media-control-bar>\n\n  Auto position contorls in a line and set some base colors\n*/\nimport { MediaStateReceiverAttributes } from './constants.js';\nimport { window, document } from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n      ${/* Need position to display above video for some reason */''}\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-icon-color, #eee);\n      --media-loading-icon-width: 44px;\n    }\n\n    media-time-range,\n    ::slotted(media-time-range),\n    ::slotted(media-progress-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n  </style>\n\n  <slot></slot>\n`;\n\nclass MediaControlBar extends window.HTMLElement {\n  #mediaController;\n\n  static get observedAttributes() {\n    return [MediaStateReceiverAttributes.MEDIA_CONTROLLER];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    }\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n  }\n\n  disconnectedCallback() {\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n  }\n}\n\nif (!window.customElements.get('media-control-bar')) {\n  window.customElements.define('media-control-bar', MediaControlBar);\n}\n\nexport default MediaControlBar;\n", "import { MediaStateReceiverAttributes } from './constants.js';\nimport { getOrInsertCSSRule } from './utils/element-utils.js';\nimport { window, document } from './utils/server-safe-globals.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      background: var(--media-control-background, rgba(20,20,30, 0.7));\n  \n      padding: var(--media-control-padding, 10px);\n\n      font-size: 14px;\n      line-height: var(--media-text-content-height, var(--media-control-height, 24px));\n      font-family: Arial, sans-serif;\n      text-align: center;\n      color: #ffffff;\n      pointer-events: auto;\n    }\n\n    ${/*\n      Only show outline when keyboard focusing.\n      https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n    */''}\n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);\n      outline: 0;\n    }\n\n    ${/*\n     * hide default focus ring, particularly when using mouse\n     */''}\n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <span id=\"container\">\n  <slot></slot>\n  </span>\n`;\n\nclass MediaTextDisplay extends window.HTMLElement {\n  #mediaController;\n\n  static get observedAttributes() {\n    return [MediaStateReceiverAttributes.MEDIA_CONTROLLER];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n    this.container = this.shadowRoot.querySelector('#container');\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n    style.setProperty('display', `var(--media-control-display, var(--${this.localName}-display, inline-flex))`);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    }\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n  }\n\n  disconnectedCallback() {\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n  }\n}\n\nif (!window.customElements.get('media-text-display')) {\n  window.customElements.define('media-text-display', MediaTextDisplay);\n}\n\nexport default MediaTextDisplay;\n", "import MediaTextDisplay from './media-text-display.js';\nimport { window } from './utils/server-safe-globals.js';\nimport { formatTime } from './utils/time.js';\nimport { MediaUIAttributes } from './constants.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nclass MediaCurrentTimeDisplay extends MediaTextDisplay {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_CURRENT_TIME];\n  }\n\n  constructor() {\n    super();\n    this.container.innerHTML = formatTime(0);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_CURRENT_TIME) {\n      this.container.innerHTML = formatTime(newValue);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n}\n\nif (!window.customElements.get('media-current-time-display')) {\n  window.customElements.define('media-current-time-display', MediaCurrentTimeDisplay);\n}\n\nexport default MediaCurrentTimeDisplay;\n", "import MediaTextDisplay from './media-text-display.js';\nimport { window } from './utils/server-safe-globals.js';\nimport { formatTime } from './utils/time.js';\nimport { MediaUIAttributes } from './constants.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nclass MediaDurationDisplay extends MediaTextDisplay {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_DURATION];\n  }\n\n  constructor() {\n    super();\n    this.container.innerHTML = formatTime(0);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_DURATION) {\n      this.container.innerHTML = formatTime(newValue);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n}\n\nif (!window.customElements.get('media-duration-display')) {\n  window.customElements.define('media-duration-display', MediaDurationDisplay);\n}\n\nexport default MediaDurationDisplay;\n", "import MediaTextDisplay from './media-text-display.js';\nimport { window } from './utils/server-safe-globals.js';\nimport { formatAsTimePhrase, formatTime } from './utils/time.js';\nimport { MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nconst DEFAULT_TIMES_SEP = '&nbsp;/&nbsp;';\n\nconst formatTimesLabel = (el, { timesSep = DEFAULT_TIMES_SEP } = {}) => {\n  const showRemaining = el.getAttribute('remaining') != null;\n  const showDuration = el.getAttribute('show-duration') != null;\n  const currentTime = el.mediaCurrentTime ?? 0;\n  const endTime = el.mediaDuration ?? el.mediaSeekableEnd ?? 0;\n\n  const timeLabel = showRemaining\n    ? formatTime(0 - (endTime - currentTime))\n    : formatTime(currentTime);\n\n  if (!showDuration) return timeLabel;\n  return `${timeLabel}${timesSep}${formatTime(endTime)}`;\n};\n\nconst DEFAULT_MISSING_TIME_PHRASE = 'video not loaded, unknown time.';\n\nconst updateAriaValueText = (el) => {\n  const currentTime = el.mediaCurrentTime;\n  const endTime = el.mediaDuration || el.mediaSeekableEnd;\n  if (currentTime == null || endTime == null) {\n    el.setAttribute('aria-valuetext', DEFAULT_MISSING_TIME_PHRASE);\n    return;\n  }\n  const showRemaining = el.hasAttribute('remaining');\n  const showDuration = el.hasAttribute('show-duration');\n\n  const currentTimePhrase = showRemaining\n    ? formatAsTimePhrase(0 - (endTime - currentTime))\n    : formatAsTimePhrase(currentTime);\n\n  if (!showDuration) {\n    el.setAttribute('aria-valuetext', currentTimePhrase);\n    return;\n  }\n  const totalTimePhrase = formatAsTimePhrase(endTime);\n  const fullPhrase = `${currentTimePhrase} of ${totalTimePhrase}`;\n  el.setAttribute('aria-valuetext', fullPhrase);\n};\n\nclass MediaTimeDisplay extends MediaTextDisplay {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_CURRENT_TIME,\n      MediaUIAttributes.MEDIA_DURATION,\n      MediaUIAttributes.MEDIA_SEEKABLE,\n      'remaining',\n      'show-duration',\n      'disabled',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.container.innerHTML = formatTimesLabel(this);\n  }\n\n  connectedCallback() {\n    if (!this.hasAttribute('disabled')) {\n      this.enable();\n    }\n\n    this.setAttribute('role', 'progressbar');\n    this.setAttribute('aria-label', nouns.PLAYBACK_TIME());\n    super.connectedCallback();\n  }\n\n  disconnectedCallback() {\n    this.disable();\n    super.disconnectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      [\n        MediaUIAttributes.MEDIA_CURRENT_TIME,\n        MediaUIAttributes.MEDIA_DURATION,\n        MediaUIAttributes.MEDIA_SEEKABLE,\n        'remaining',\n        'show-duration',\n      ].includes(attrName)\n    ) {\n      const timesLabel = formatTimesLabel(this);\n      updateAriaValueText(this);\n      this.container.innerHTML = timesLabel;\n    } else if (attrName === 'disabled' && newValue !== oldValue) {\n      if (newValue == null) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n    }\n\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  enable() {\n    this.setAttribute('tabindex', 0);\n  }\n\n  disable() {\n    this.removeAttribute('tabindex');\n  }\n\n  get mediaDuration() {\n    const attrVal = this.getAttribute(MediaUIAttributes.MEDIA_DURATION);\n    return attrVal != null ? +attrVal : undefined;\n  }\n\n  get mediaCurrentTime() {\n    const attrVal = this.getAttribute(MediaUIAttributes.MEDIA_CURRENT_TIME);\n    return attrVal != null ? +attrVal : undefined;\n  }\n\n  get mediaSeekable() {\n    const seekable = this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n    if (!seekable) return undefined;\n    // Only currently supports a single, contiguous seekable range (CJP)\n    return seekable.split(':').map((time) => +time);\n  }\n\n  get mediaSeekableEnd() {\n    const [, end] = this.mediaSeekable ?? [];\n    return end;\n  }\n\n  get mediaSeekableStart() {\n    const [start] = this.mediaSeekable ?? [];\n    return start;\n  }\n}\n\nif (!window.customElements.get('media-time-display')) {\n  window.customElements.define('media-time-display', MediaTimeDisplay);\n}\n\nexport default MediaTimeDisplay;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\nimport { isCCOn, toggleSubsCaps } from './utils/captions.js';\n\nconst ccIconOn = `<svg aria-hidden=\"true\" viewBox=\"0 0 26 24\">\n  <path d=\"M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z\"/>\n</svg>`;\n\nconst ccIconOff = `<svg aria-hidden=\"true\" viewBox=\"0 0 26 24\">\n  <path d=\"M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z\"/>\n</svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host([aria-checked=\"true\"]) slot:not([name=on]) > *,\n  :host([aria-checked=\"true\"]) ::slotted(:not([slot=on])) {\n    display: none !important;\n  }\n\n  ${/* Double negative, but safer if display doesn't equal 'block' */ ''\n  }\n  :host(:not([aria-checked=\"true\"])) slot:not([name=off]) > *, \n  :host(:not([aria-checked=\"true\"])) ::slotted(:not([slot=off])) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"on\">${ccIconOn}</slot>\n  <slot name=\"off\">${ccIconOff}</slot>\n`;\n\nconst updateAriaChecked = (el) => {\n  el.setAttribute('aria-checked', isCCOn(el));\n};\n\nclass MediaCaptionsButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      'no-subtitles-fallback',\n      'default-showing',\n      MediaUIAttributes.MEDIA_CAPTIONS_LIST,\n      MediaUIAttributes.MEDIA_CAPTIONS_SHOWING,\n      MediaUIAttributes.MEDIA_SUBTITLES_LIST,\n      MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n    // Internal variable to keep track of when we have some or no captions (or subtitles, if using subtitles fallback)\n    // Used for `default-showing` behavior.\n    this._captionsReady = false;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute('role', 'switch');\n    this.setAttribute('aria-label', nouns.CLOSED_CAPTIONS());\n    updateAriaChecked(this);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      [\n        MediaUIAttributes.MEDIA_CAPTIONS_SHOWING,\n        MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,\n      ].includes(attrName)\n    ) {\n      updateAriaChecked(this);\n    }\n    if (\n      this.hasAttribute('default-showing') && // we want to show captions by default\n      this.getAttribute('aria-checked') !== 'true' // and we aren't currently showing them\n    ) {\n      // Make sure we're only checking against the relevant attributes based on whether or not we are using subtitles fallback\n      const subtitlesIncluded = !this.hasAttribute('no-subtitles-fallback');\n      const relevantAttributes = subtitlesIncluded\n        ? [\n            MediaUIAttributes.MEDIA_CAPTIONS_LIST,\n            MediaUIAttributes.MEDIA_SUBTITLES_LIST,\n          ]\n        : [MediaUIAttributes.MEDIA_CAPTIONS_LIST];\n      // If one of the relevant attributes changed...\n      if (relevantAttributes.includes(attrName)) {\n        // check if we went\n        // a) from captions (/subs) not ready to captions (/subs) ready\n        // b) from captions (/subs) ready to captions (/subs) not ready.\n        // by using a simple truthy (empty or non-empty) string check on the relevant values\n        // NOTE: We're using `getAttribute` here instead of `newValue` because we may care about\n        // multiple attributes.\n        const nextCaptionsReady =\n          !!this.getAttribute(MediaUIAttributes.MEDIA_CAPTIONS_LIST) ||\n          !!(\n            subtitlesIncluded &&\n            this.getAttribute(MediaUIAttributes.MEDIA_SUBTITLES_LIST)\n          );\n        // If the value changed, (re)set the internal prop\n        if (this._captionsReady !== nextCaptionsReady) {\n          this._captionsReady = nextCaptionsReady;\n          // If captions are currently ready, that means we went from unready to ready, so\n          // use the click handler to dispatch a request to turn captions on\n          if (this._captionsReady) {\n            toggleSubsCaps(this);\n          }\n        }\n      }\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    toggleSubsCaps(this);\n  }\n}\n\nif (!window.customElements.get('media-captions-button')) {\n  window.customElements.define('media-captions-button', MediaCaptionsButton);\n}\n\nexport default MediaCaptionsButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\nimport { getSlotted, updateIconText } from './utils/element-utils.js';\n\nconst DEFAULT_SEEK_OFFSET = '30';\n\nconst forwardIcon =\n  `<svg aria-hidden=\"true\" viewBox=\"0 0 20 24\"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class=\"text value\" transform=\"translate(8.9 19.87)\">${DEFAULT_SEEK_OFFSET}</text><path d=\"M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z\"/></svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `  \n  <slot name=\"forward\">${forwardIcon}</slot>\n`;\n\nconst DEFAULT_TIME = 0;\n\nconst updateAriaLabel = (el) => {\n  // NOTE: seek direction is described via text, so always use positive numeric representation\n  const seekOffset = Math.abs(+el.getAttribute('seek-offset'));\n  const label = verbs.SEEK_FORWARD_N_SECS({ seekOffset });\n  el.setAttribute('aria-label', label);\n};\n\nconst updateSeekIconValue = (el) => {\n  const svg = getSlotted(el, 'forward');\n  const value = el.getAttribute('seek-offset');\n  updateIconText(svg, value);\n};\n\nclass MediaSeekForwardButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_CURRENT_TIME,\n      'seek-offset',\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    // NOTE: currently don't support changing the seek value, so only need to set this once on initialization.\n    if (!this.hasAttribute('seek-offset')) {\n      this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n    }\n    updateAriaLabel(this);\n    updateSeekIconValue(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, _oldValue, newValue) {\n    if (attrName === 'seek-offset') {\n      if (newValue == undefined) {\n        this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n      }\n      updateSeekIconValue(this);\n      updateAriaLabel(this);\n    }\n\n    super.attributeChangedCallback(attrName, _oldValue, newValue);\n  }\n\n  handleClick() {\n    const currentTimeStr = this.getAttribute(\n      MediaUIAttributes.MEDIA_CURRENT_TIME\n    );\n    const seekOffset = +this.getAttribute('seek-offset');\n    const currentTime =\n      currentTimeStr && !Number.isNaN(+currentTimeStr)\n        ? +currentTimeStr\n        : DEFAULT_TIME;\n    const detail = currentTime + seekOffset;\n    const evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n      composed: true,\n      bubbles: true,\n      detail,\n    });\n    this.dispatchEvent(evt);\n  }\n}\n\nif (!window.customElements.get('media-seek-forward-button')) {\n  window.customElements.define('media-seek-forward-button', MediaSeekForwardButton);\n}\n\nexport default MediaSeekForwardButton;\n", "/*\n  <media-fullscreen-button media=\"#myVideo\" fullscreen-element=\"#myContainer\">\n\n  The fullscreen-element attribute can be used to say which element\n  to make fullscreen.\n  If none, the button will look for the closest media-container element to the media.\n  If none, the button will make the media fullscreen.\n*/\nimport MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst enterFullscreenIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 26 24\">\n  <path d=\"M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z\"/>\n</svg>`;\n\nconst exitFullscreenIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 26 24\">\n  <path d=\"M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z\"/>\n</svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}]) slot:not([name=exit]) > *,\n  :host([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}]) ::slotted(:not([slot=exit])) {\n    display: none !important;\n  }\n\n  ${/* Double negative, but safer if display doesn't equal 'block' */ ''}\n  :host(:not([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}])) slot:not([name=enter]) > *,\n  :host(:not([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}])) ::slotted(:not([slot=enter])) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"enter\">${enterFullscreenIcon}</slot>\n  <slot name=\"exit\">${exitFullscreenIcon}</slot>\n`;\n\nconst updateAriaLabel = (el) => {\n  const isFullScreen =\n    el.getAttribute(MediaUIAttributes.MEDIA_IS_FULLSCREEN) != null;\n  const label = isFullScreen\n    ? verbs.EXIT_FULLSCREEN()\n    : verbs.ENTER_FULLSCREEN();\n  el.setAttribute('aria-label', label);\n};\n\nclass MediaFullscreenButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_IS_FULLSCREEN,\n      MediaUIAttributes.MEDIA_FULLSCREEN_UNAVAILABLE\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    updateAriaLabel(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_IS_FULLSCREEN) {\n      updateAriaLabel(this);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_IS_FULLSCREEN) != null\n        ? MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST\n        : MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nif (!window.customElements.get('media-fullscreen-button')) {\n  window.customElements.define('media-fullscreen-button', MediaFullscreenButton);\n}\n\nexport default MediaFullscreenButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport {\n  Window as window,\n  Document as document,\n} from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\n\nconst { MEDIA_TIME_IS_LIVE, MEDIA_PAUSED } = MediaUIAttributes;\nconst { MEDIA_SEEK_TO_LIVE_REQUEST, MEDIA_PLAY_REQUEST } = MediaUIEvents;\n\nconst indicatorSVG = '<svg viewBox=\"0 0 6 12\"><circle cx=\"3\" cy=\"6\" r=\"2\"></circle></svg>';\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n\n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    ${/* Override styles for icon-only buttons */''}\n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) slot[name=indicator] > *,\n  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) {\n    cursor: not-allowed;\n  }\n\n  </style>\n\n  <slot name=\"indicator\">${indicatorSVG}</slot>\n  ${/*\n    A new line between spacer and text creates inconsistent spacing\n    between slotted items and default slots.\n  */''}\n  <slot name=\"spacer\">&nbsp;</slot><slot name=\"text\">LIVE</slot>\n`;\n\nclass MediaLiveButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MEDIA_PAUSED,\n      MEDIA_TIME_IS_LIVE\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n    this.setAttribute('aria-label', 'Seek to Live');\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    // If we're live and not paused, don't allow seek to live\n    if (!this.hasAttribute(MEDIA_PAUSED) && this.hasAttribute(MEDIA_TIME_IS_LIVE)) return;\n\n    this.dispatchEvent(\n      new window.CustomEvent(MEDIA_SEEK_TO_LIVE_REQUEST, { composed: true, bubbles: true })\n    );\n\n    // If we're paused, also automatically play\n    if (this.hasAttribute(MEDIA_PAUSED)) {\n      this.dispatchEvent(\n        new window.CustomEvent(MEDIA_PLAY_REQUEST, { composed: true, bubbles: true })\n      );\n    }\n  }\n}\n\nif (!window.customElements.get('media-live-button')) {\n  window.customElements.define('media-live-button', MediaLiveButton);\n}\n\nexport default MediaLiveButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst offIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\">\n  <path d=\"M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z\"/>\n</svg>`;\n\nconst lowIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\">\n  <path d=\"M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z\"/>\n</svg>`;\n\nconst highIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\">\n  <path d=\"M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z\"/>\n</svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  ${/* Default to High slot/icon. */''}\n  :host(:not([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}])) slot:not([name=high]) > *, \n  :host(:not([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}])) ::slotted(:not([slot=high])),\n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=high]) slot:not([name=high]) > *, \n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=high]) ::slotted(:not([slot=high])) {\n    display: none !important;\n  }\n\n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=off]) slot:not([name=off]) > *, \n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=off]) ::slotted(:not([slot=off])) {\n    display: none !important;\n  }\n\n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=low]) slot:not([name=low]) > *, \n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=low]) ::slotted(:not([slot=low])) {\n    display: none !important;\n  }\n\n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=medium]) slot:not([name=medium]) > *, \n  :host([${MediaUIAttributes.MEDIA_VOLUME_LEVEL}=medium]) ::slotted(:not([slot=medium])) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"off\">${offIcon}</slot>\n  <slot name=\"low\">${lowIcon}</slot>\n  <slot name=\"medium\">${lowIcon}</slot>\n  <slot name=\"high\">${highIcon}</slot>\n`;\n\nconst updateAriaLabel = (el) => {\n  const muted = el.getAttribute(MediaUIAttributes.MEDIA_VOLUME_LEVEL) === 'off';\n  const label = muted ? verbs.UNMUTE() : verbs.MUTE();\n  el.setAttribute('aria-label', label);\n};\n\nclass MediaMuteButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_VOLUME_LEVEL];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    updateAriaLabel(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_VOLUME_LEVEL) {\n      updateAriaLabel(this);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_VOLUME_LEVEL) === 'off'\n        ? MediaUIEvents.MEDIA_UNMUTE_REQUEST\n        : MediaUIEvents.MEDIA_MUTE_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nif (!window.customElements.get('media-mute-button')) {\n  window.customElements.define('media-mute-button', MediaMuteButton);\n}\n\nexport default MediaMuteButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst pipIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 28 24\">\n  <path d=\"M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z\"/>\n</svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host([${MediaUIAttributes.MEDIA_IS_PIP}]) slot:not([name=exit]) > *, \n  :host([${MediaUIAttributes.MEDIA_IS_PIP}]) ::slotted(:not([slot=exit])) {\n    display: none !important;\n  }\n\n  ${/* Double negative, but safer if display doesn't equal 'block' */ ''}\n  :host(:not([${MediaUIAttributes.MEDIA_IS_PIP}])) slot:not([name=enter]) > *, \n  :host(:not([${MediaUIAttributes.MEDIA_IS_PIP}])) ::slotted(:not([slot=enter])) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"enter\">${pipIcon}</slot>\n  <slot name=\"exit\">${pipIcon}</slot>\n`;\n\nconst updateAriaLabel = (el) => {\n  const isPip = el.getAttribute(MediaUIAttributes.MEDIA_IS_PIP) != null;\n  const label = isPip ? verbs.EXIT_PIP() : verbs.ENTER_PIP();\n  el.setAttribute('aria-label', label);\n};\n\nclass MediaPipButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_IS_PIP, MediaUIAttributes.MEDIA_PIP_UNAVAILABLE];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    updateAriaLabel(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_IS_PIP) {\n      updateAriaLabel(this);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_IS_PIP) != null\n        ? MediaUIEvents.MEDIA_EXIT_PIP_REQUEST\n        : MediaUIEvents.MEDIA_ENTER_PIP_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nif (!window.customElements.get('media-pip-button')) {\n  window.customElements.define('media-pip-button', MediaPipButton);\n}\n\nexport default MediaPipButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\n\nconst playIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\">\n  <path d=\"m6 21 15-9L6 3v18Z\"/>\n</svg>`;\n\nconst pauseIcon = `<svg aria-hidden=\"true\" viewBox=\"0 0 24 24\">\n  <path d=\"M6 20h4V4H6v16Zm8-16v16h4V4h-4Z\"/>\n</svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host([${MediaUIAttributes.MEDIA_PAUSED}]) slot[name=pause] > *, \n  :host([${MediaUIAttributes.MEDIA_PAUSED}]) ::slotted([slot=pause]) {\n    display: none !important;\n  }\n\n  :host(:not([${MediaUIAttributes.MEDIA_PAUSED}])) slot[name=play] > *, \n  :host(:not([${MediaUIAttributes.MEDIA_PAUSED}])) ::slotted([slot=play]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name=\"play\">${playIcon}</slot>\n  <slot name=\"pause\">${pauseIcon}</slot>\n`;\n\nconst updateAriaLabel = (el) => {\n  const paused = el.getAttribute(MediaUIAttributes.MEDIA_PAUSED) != null;\n  const label = paused ? verbs.PLAY() : verbs.PAUSE();\n  el.setAttribute('aria-label', label);\n};\n\nclass MediaPlayButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_PAUSED];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    updateAriaLabel(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_PAUSED) {\n      updateAriaLabel(this);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const eventName =\n      this.getAttribute(MediaUIAttributes.MEDIA_PAUSED) != null\n        ? MediaUIEvents.MEDIA_PLAY_REQUEST\n        : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n    this.dispatchEvent(\n      new window.CustomEvent(eventName, { composed: true, bubbles: true })\n    );\n  }\n}\n\nif (!window.customElements.get('media-play-button')) {\n  window.customElements.define('media-play-button', MediaPlayButton);\n}\n\nexport default MediaPlayButton;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\n\n/*\n  <media-playback-rate-button rates=\"1 1.5 2\">\n*/\n\nconst DEFAULT_RATES = [1, 1.25, 1.5, 1.75, 2];\nconst DEFAULT_RATE = 1;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <span id=\"container\"></span>\n`;\n\nclass MediaPlaybackRateButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_PLAYBACK_RATE,\n      'rates',\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n    this._rates = DEFAULT_RATES;\n    this.container = this.shadowRoot.querySelector('#container');\n    this.container.innerHTML = `${DEFAULT_RATE}x`;\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === 'rates') {\n      // This will:\n      // 1. parse the space-separated attribute string (standard for representing lists as HTML/CSS values) into an array (of strings)\n      //   The current regex allows for commas to be present between numbers to preserve legacy behavior\n      // 2. convert that list into numbers (including potentially NaN)\n      // 3. filter out all NaNs for invalid values\n      // 4. sort the array of numbers to ensure the expected toggle-through order for playback rate.\n      const newRates = (newValue ?? '')\n        .trim()\n        .split(/\\s*,?\\s+/)\n        .map((str) => Number(str))\n        .filter((num) => !Number.isNaN(num))\n        .sort((a, b) => a - b);\n      this._rates = newRates.length ? newRates : DEFAULT_RATES;\n      return;\n    }\n    if (attrName === MediaUIAttributes.MEDIA_PLAYBACK_RATE) {\n      const newPlaybackRate = newValue ? +newValue : Number.NaN;\n      const playbackRate = !Number.isNaN(newPlaybackRate)\n        ? newPlaybackRate\n        : DEFAULT_RATE;\n      this.container.innerHTML = `${playbackRate}x`;\n      this.setAttribute('aria-label', nouns.PLAYBACK_RATE({ playbackRate }));\n      return;\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick() {\n    const currentRate =\n      +this.getAttribute(MediaUIAttributes.MEDIA_PLAYBACK_RATE) || DEFAULT_RATE;\n    const detail =\n      this._rates.find((r) => r > currentRate) ??\n      this._rates[0] ??\n      DEFAULT_RATE;\n    const evt = new window.CustomEvent(\n      MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST,\n      { composed: true, bubbles: true, detail }\n    );\n    this.dispatchEvent(evt);\n  }\n}\n\nif (!window.customElements.get('media-playback-rate-button')) {\n  window.customElements.define('media-playback-rate-button', MediaPlaybackRateButton);\n}\n\nexport default MediaPlaybackRateButton;\n", "import { window, document } from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-background-position, var(--media-object-position, center));\n      background-size: var(--media-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img aria-hidden=\"true\" id=\"image\"/>\n`;\n\nconst unsetBackgroundImage = (el) => {\n  el.style.removeProperty('background-image');\n}\nconst setBackgroundImage = (el, image) => {\n  el.style['background-image'] = `url('${image}')`;\n}\n\nclass MediaPosterImage extends window.HTMLElement {\n  static get observedAttributes() {\n    return ['placeholder-src', 'src'];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n    this.image = this.shadowRoot.querySelector('#image');\n  }\n\n  attributeChangedCallback(attrName, _oldValue, newValue) {\n    if (attrName === 'src') {\n      if (newValue == null) {\n        this.image.removeAttribute('src');\n      } else {\n        this.image.setAttribute('src', newValue);\n      }\n    }\n\n    if (attrName === 'placeholder-src') {\n      if (newValue == null) {\n        unsetBackgroundImage(this.image);\n      } else {\n        setBackgroundImage(this.image, newValue);\n      }\n    }\n  }\n}\n\nif (!window.customElements.get('media-poster-image')) {\n  window.customElements.define('media-poster-image', MediaPosterImage);\n}\n\nexport default MediaPosterImage;\n", "import MediaChromeRange from './media-chrome-range.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\nimport { formatAsTimePhrase } from './utils/time.js';\nimport { getOrInsertCSSRule, closestComposedNode } from './utils/element-utils.js';\n\nconst DEFAULT_MISSING_TIME_PHRASE = 'video not loaded, unknown time.';\n\nconst updateAriaValueText = (el) => {\n  const range = el.range;\n  const currentTimePhrase = formatAsTimePhrase(+range.value);\n  const totalTimePhrase = formatAsTimePhrase(+range.max);\n  const fullPhrase = !(currentTimePhrase && totalTimePhrase)\n    ? DEFAULT_MISSING_TIME_PHRASE\n    : `${currentTimePhrase} of ${totalTimePhrase}`;\n  range.setAttribute('aria-valuetext', fullPhrase);\n};\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n  <style>\n    :host {\n      --media-preview-background-color: rgba(20,20,30, .5);\n      --media-preview-background: var(--media-control-background,\n        var(--media-preview-background-color));\n      --media-preview-border-radius: 3px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n      color: #fff;\n    }\n\n    #preview-rail,\n    #current-rail {\n      ${/* 1% of parent element and upscale by 100 in the translateX() */''}\n      width: 1%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n    }\n\n    [part~=\"box\"] {\n      ${/* absolute position is needed here so the box doesn't overflow the bounds */''}\n      position: absolute;\n      bottom: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~=\"preview-box\"] {\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) [part~=\"preview-box\"],\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) [part~=\"preview-box\"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      ${/* delay changing these CSS props until the preview box transition is ended */''}\n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--media-preview-background));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgba(0,0,0, .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display) {\n      color: unset;\n      min-width: 0;\n      ${/* delay changing these CSS props until the preview box transition is ended */''}\n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--media-preview-background));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 1px 10px 0);\n      margin: var(--media-preview-time-margin, 0 0 10px);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgba(0,0,0, .75));\n    }\n\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      min-width: 100%;\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n    }\n\n    :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n  </style>\n  <div id=\"preview-rail\">\n    <slot name=\"preview\" part=\"box preview-box\">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-time-display></media-preview-time-display>\n    </slot>\n  </div>\n  <div id=\"current-rail\">\n    <slot name=\"current\" part=\"box current-box\">\n      ${/* Example: add the current time to the playhead\n        <media-current-time-display></media-current-time-display> */''}\n    </slot>\n  </div>\n`;\n\nclass MediaTimeRange extends MediaChromeRange {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      'thumbnails',\n      'disabled',\n      MediaUIAttributes.MEDIA_PAUSED,\n      MediaUIAttributes.MEDIA_DURATION,\n      MediaUIAttributes.MEDIA_SEEKABLE,\n      MediaUIAttributes.MEDIA_CURRENT_TIME,\n      MediaUIAttributes.MEDIA_PREVIEW_IMAGE,\n      MediaUIAttributes.MEDIA_PREVIEW_TIME,\n      MediaUIAttributes.MEDIA_BUFFERED,\n      MediaUIAttributes.MEDIA_PLAYBACK_RATE,\n      MediaUIAttributes.MEDIA_LOADING,\n    ];\n  }\n\n  #boxes;\n  #previewBox;\n  #currentBox;\n  #boxPaddingLeft;\n  #boxPaddingRight;\n\n  constructor() {\n    super();\n\n    this.container.appendChild(template.content.cloneNode(true));\n\n    this.range.addEventListener('input', () => {\n      // Cancel color bar refreshing when seeking.\n      cancelAnimationFrame(this._refreshId);\n\n      const newTime = this.range.value;\n      const detail = newTime;\n      const evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n        composed: true,\n        bubbles: true,\n        detail,\n      });\n      this.dispatchEvent(evt);\n    });\n\n    // Come back to this feature\n    // this.playIfNotReady = e => {\n    //   this.range.removeEventListener('change', this.playIfNotReady);\n    //   const media = this.media;\n    //   media.play().then(this.setMediaTimeWithRange);\n    // };\n\n    this._refreshBar = () => {\n      const delta = (performance.now() - this._updateTimestamp) / 1000;\n      this.range.value = this.mediaCurrentTime + delta * this.mediaPlaybackRate;\n      this.updateBar();\n      this.updateCurrentBox();\n\n      this._refreshId = requestAnimationFrame(this._refreshBar);\n    };\n\n    this.#boxes = this.shadowRoot.querySelectorAll('[part~=\"box\"]');\n    this.#previewBox = this.shadowRoot.querySelector('[part~=\"preview-box\"]');\n    this.#currentBox = this.shadowRoot.querySelector('[part~=\"current-box\"]');\n\n    const computedStyle = getComputedStyle(this);\n    this.#boxPaddingLeft = parseInt(\n      computedStyle.getPropertyValue('--media-box-padding-left')\n    );\n    this.#boxPaddingRight = parseInt(\n      computedStyle.getPropertyValue('--media-box-padding-right')\n    );\n\n    this.#enableBoxes();\n  }\n\n  connectedCallback() {\n    this.range.setAttribute('aria-label', nouns.SEEK());\n    super.connectedCallback();\n  }\n\n  disconnectedCallback() {\n    cancelAnimationFrame(this._refreshId);\n    super.disconnectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      attrName === MediaUIAttributes.MEDIA_CURRENT_TIME ||\n      attrName === MediaUIAttributes.MEDIA_PAUSED ||\n      attrName === MediaUIAttributes.MEDIA_LOADING\n    ) {\n      this._updateTimestamp = performance.now();\n      this.range.value = this.mediaCurrentTime;\n      updateAriaValueText(this);\n      this.updateBar();\n      this.updateCurrentBox();\n\n      cancelAnimationFrame(this._refreshId);\n      if (!this.mediaPaused && !this.mediaLoading) {\n        this._refreshId = requestAnimationFrame(this._refreshBar);\n      }\n    }\n    if (attrName === MediaUIAttributes.MEDIA_DURATION) {\n      this.range.max = this.mediaSeekableEnd ?? this.mediaDuration ?? 1000;\n      updateAriaValueText(this);\n      this.updateBar();\n      this.updateCurrentBox();\n    }\n    if (attrName === MediaUIAttributes.MEDIA_SEEKABLE) {\n      this.range.min = this.mediaSeekableStart ?? 0;\n      this.range.max = this.mediaSeekableEnd ?? this.mediaDuration ?? 1000;\n      updateAriaValueText(this);\n      this.updateBar();\n    }\n    if (attrName === MediaUIAttributes.MEDIA_BUFFERED) {\n      this.updateBar();\n    }\n    if (attrName === 'disabled') {\n      if (newValue == null) {\n        this.#enableBoxes();\n      } else {\n        this.#disableBoxes();\n      }\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  get mediaPaused() {\n    return this.hasAttribute(MediaUIAttributes.MEDIA_PAUSED);\n  }\n\n  get mediaLoading() {\n    return this.hasAttribute(MediaUIAttributes.MEDIA_LOADING);\n  }\n\n  get mediaDuration() {\n    const attrVal = this.getAttribute(MediaUIAttributes.MEDIA_DURATION);\n    return attrVal != null ? +attrVal : undefined;\n  }\n\n  get mediaCurrentTime() {\n    const attrVal = this.getAttribute(MediaUIAttributes.MEDIA_CURRENT_TIME);\n    return attrVal != null ? +attrVal : undefined;\n  }\n\n  get mediaPlaybackRate() {\n    const attrVal = this.getAttribute(MediaUIAttributes.MEDIA_PLAYBACK_RATE);\n    return attrVal != null ? +attrVal : 1;\n  }\n\n  get mediaBuffered() {\n    const buffered = this.getAttribute(MediaUIAttributes.MEDIA_BUFFERED);\n    if (!buffered) return [];\n    return buffered\n      .split(' ')\n      .map((timePair) => timePair.split(':').map((timeStr) => +timeStr));\n  }\n\n  get mediaSeekable() {\n    const seekable = this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n    if (!seekable) return undefined;\n    // Only currently supports a single, contiguous seekable range (CJP)\n    return seekable.split(':').map((time) => +time);\n  }\n\n  get mediaSeekableEnd() {\n    const [, end] = this.mediaSeekable ?? [];\n    return end;\n  }\n\n  get mediaSeekableStart() {\n    const [start] = this.mediaSeekable ?? [];\n    return start;\n  }\n\n  /* Add a buffered progress bar */\n  getBarColors() {\n    let colorsArray = super.getBarColors();\n    const { range } = this;\n    const relativeMax = range.max - range.min;\n    const buffered = this.mediaBuffered;\n\n    if (!buffered.length || !Number.isFinite(relativeMax) || relativeMax <= 0) {\n      return colorsArray;\n    }\n\n    // Find the buffered range that \"contains\" the current time and get its end.\n    // If none, just assume the start of the media timeline/range.min for\n    // visualization purposes.\n    // Use mediaCurrentTime instead of range.value for precision (CJP)\n    const currentTime = this.mediaCurrentTime;\n    const [, bufferedEnd = range.min] =\n      buffered.find(\n        ([start, end]) => start <= currentTime && currentTime <= end\n      ) ?? [];\n    const relativeBufferedEnd = bufferedEnd - range.min;\n\n    const buffPercent = (relativeBufferedEnd / relativeMax) * 100;\n    colorsArray.splice(1, 0, [\n      'var(--media-time-buffered-color, rgba(255,255,255, .4))',\n      buffPercent,\n    ]);\n    return colorsArray;\n  }\n\n  updateCurrentBox() {\n    // If there are no elements in the current box no need for expensive style updates.\n    // @ts-ignore\n    if (!this.#currentBox.assignedElements().length) return;\n\n    const boxRatio = this.range.value / (this.range.max - this.range.min);\n    const boxPos = this.#getBoxPosition(this.#currentBox, boxRatio);\n    const { style } = getOrInsertCSSRule(\n      this.shadowRoot,\n      '#current-rail'\n    );\n    style.transform = `translateX(${boxPos})`;\n  }\n\n  #getBoxPosition(box, ratio) {\n    let position = `${ratio * 100 * 100}%`;\n\n    // Use offset dimensions to include borders.\n    const boxWidth = box.offsetWidth;\n    if (!boxWidth) return position;\n\n    // Get the element that enforces the bounds for the time range boxes.\n    const bounds =\n      (this.getAttribute('bounds')\n        ? closestComposedNode(this, `#${this.getAttribute('bounds')}`)\n        : this.parentElement) ?? this;\n\n    const rangeRect = this.range.getBoundingClientRect();\n    const mediaBoundsRect = bounds.getBoundingClientRect();\n    const boxMin = (this.#boxPaddingLeft - (rangeRect.left - mediaBoundsRect.left - boxWidth / 2)) / rangeRect.width * 100;\n    const boxMax = (mediaBoundsRect.right - rangeRect.left - boxWidth / 2 - this.#boxPaddingRight) / rangeRect.width * 100;\n\n    if (!Number.isNaN(boxMin)) position = `max(${boxMin * 100}%, ${position})`;\n    if (!Number.isNaN(boxMax)) position = `min(${position}, ${boxMax * 100}%)`;\n\n    return position;\n  }\n\n  #pointermoveHandler = (evt) => {\n    // @ts-ignore\n    if ([...this.#boxes].some((b) => evt.composedPath().includes(b))) return;\n\n    this.updatePointerBar(evt);\n\n    const duration = +this.getAttribute(MediaUIAttributes.MEDIA_DURATION);\n    // If no duration we can't calculate which time to show\n    if (!duration) return;\n\n    // Get mouse position percent\n    const rangeRect = this.range.getBoundingClientRect();\n    let mouseRatio = (evt.clientX - rangeRect.left) / rangeRect.width;\n    // Lock between 0 and 1\n    mouseRatio = Math.max(0, Math.min(1, mouseRatio));\n\n    const boxPos = this.#getBoxPosition(this.#previewBox, mouseRatio);\n    const { style } = getOrInsertCSSRule(\n      this.shadowRoot,\n      '#preview-rail'\n    );\n    style.transform = `translateX(${boxPos})`;\n\n    const detail = mouseRatio * duration;\n    const mediaPreviewEvt = new window.CustomEvent(\n      MediaUIEvents.MEDIA_PREVIEW_REQUEST,\n      { composed: true, bubbles: true, detail }\n    );\n    this.dispatchEvent(mediaPreviewEvt);\n  }\n\n  // Trigger when the mouse moves over the range\n  #rangeEntered = false\n\n  #offRangeHandler = (evt) => {\n    if (\n      !evt.composedPath().includes(this) ||\n      // @ts-ignore\n      [...this.#boxes].some((b) => evt.composedPath().includes(b))\n    ) {\n      window.removeEventListener('pointermove', this.#offRangeHandler);\n      this.#rangeEntered = false;\n      this.#stopTrackingMouse();\n    }\n  }\n\n  #trackMouse = () => {\n    window.addEventListener('pointermove', this.#pointermoveHandler, false);\n  }\n\n  #stopTrackingMouse = () => {\n    window.removeEventListener('pointermove', this.#pointermoveHandler);\n    const endEvt = new window.CustomEvent(\n      MediaUIEvents.MEDIA_PREVIEW_REQUEST,\n      { composed: true, bubbles: true, detail: null }\n    );\n    this.dispatchEvent(endEvt);\n  }\n\n  #rangepointermoveHandler = () => {\n    const mediaDurationStr = this.getAttribute(\n      MediaUIAttributes.MEDIA_DURATION\n    );\n    if (!this.#rangeEntered && mediaDurationStr) {\n      this.#rangeEntered = true;\n      this.#trackMouse();\n\n      window.addEventListener('pointermove', this.#offRangeHandler, false);\n    }\n  }\n\n  #enableBoxes() {\n    this.addEventListener('pointermove', this.#rangepointermoveHandler, false);\n  }\n\n  #disableBoxes() {\n    window.removeEventListener('pointermove', this.#offRangeHandler);\n    this.removeEventListener('pointermove', this.#rangepointermoveHandler);\n    this.#rangeEntered = false;\n    this.#stopTrackingMouse();\n  }\n}\n\nif (!window.customElements.get('media-time-range')) {\n  window.customElements.define('media-time-range', MediaTimeRange);\n}\n\nexport default MediaTimeRange;\n", "/* \n  Renamed to <media-time-range> and deprecated\n*/\n\nimport MediaTimeRange from './media-time-range.js';\nimport { window } from './utils/server-safe-globals.js';\n\nclass MediaProgressRange extends MediaTimeRange {\n  constructor() {\n    super();\n\n    console.warn(\n      'MediaChrome: <media-progress-range> is deprecated. Use <media-time-range> instead.'\n    );\n  }\n}\n\nif (!window.customElements.get('media-progress-range')) {\n  window.customElements.define('media-progress-range', MediaProgressRange);\n}\n\nexport default MediaProgressRange;\n", "import MediaChromeButton from './media-chrome-button.js';\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\nimport { getSlotted, updateIconText } from './utils/element-utils.js';\n\nconst DEFAULT_SEEK_OFFSET = '30';\n\nconst backwardIcon =\n  `<svg aria-hidden=\"true\" viewBox=\"0 0 20 24\"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class=\"text value\" transform=\"translate(2.18 19.87)\">${DEFAULT_SEEK_OFFSET}</text><path d=\"M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z\"/></svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `  \n  <slot name=\"backward\">${backwardIcon}</slot>\n`;\n\nconst DEFAULT_TIME = 0;\n\nconst updateAriaLabel = (el) => {\n  // NOTE: seek direction is described via text, so always use positive numeric representation\n  const seekOffset = Math.abs(+el.getAttribute('seek-offset'));\n  const label = verbs.SEEK_BACK_N_SECS({ seekOffset });\n  el.setAttribute('aria-label', label);\n};\n\nconst updateSeekIconValue = (el) => {\n  const svg = getSlotted(el, 'backward');\n  const value = el.getAttribute('seek-offset');\n  updateIconText(svg, value);\n};\n\nclass MediaSeekBackwardButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_CURRENT_TIME];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    // NOTE: currently don't support changing the seek value, so only need to set this once on initialization.\n    if (!this.hasAttribute('seek-offset')) {\n      this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n    }\n    updateAriaLabel(this);\n    updateSeekIconValue(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, _oldValue, newValue) {\n    if (attrName === 'seek-offset') {\n      if (newValue == undefined) {\n        this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n      }\n      updateSeekIconValue(this);\n      updateAriaLabel(this);\n    }\n\n    super.attributeChangedCallback(attrName, _oldValue, newValue);\n  }\n\n  handleClick() {\n    const currentTimeStr = this.getAttribute(\n      MediaUIAttributes.MEDIA_CURRENT_TIME\n    );\n    const seekOffset = +this.getAttribute('seek-offset');\n    const currentTime =\n      currentTimeStr && !Number.isNaN(+currentTimeStr)\n        ? +currentTimeStr\n        : DEFAULT_TIME;\n    const detail = Math.max(currentTime - seekOffset, 0);\n    const evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n      composed: true,\n      bubbles: true,\n      detail,\n    });\n    this.dispatchEvent(evt);\n  }\n}\n\nif (!window.customElements.get('media-seek-backward-button')) {\n  window.customElements.define('media-seek-backward-button', MediaSeekBackwardButton);\n}\n\nexport default MediaSeekBackwardButton;\n", "import MediaTextDisplay from './media-text-display.js';\nimport { window } from './utils/server-safe-globals.js';\nimport { formatTime } from './utils/time.js';\nimport { MediaUIAttributes } from './constants.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nclass MediaPreviewTimeDisplay extends MediaTextDisplay {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_PREVIEW_TIME];\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_PREVIEW_TIME && newValue != null) {\n      this.container.textContent = formatTime(newValue);\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n}\n\nif (!window.customElements.get('media-preview-time-display')) {\n  window.customElements.define('media-preview-time-display', MediaPreviewTimeDisplay);\n}\n\nexport default MediaPreviewTimeDisplay;\n", "/*\n  <media-preview-thumbnail media=\"#myVideo\" time=\"10.00\">\n\n  Uses the \"thumbnails\" track of a video element to show an image relative to\n  the video time given in the `time` attribute.\n*/\nimport { window, document } from './utils/server-safe-globals.js';\nimport { MediaUIAttributes, MediaStateReceiverAttributes } from './constants.js';\nimport { getOrInsertCSSRule } from './utils/element-utils.js';\n\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading=\"eager\" decoding=\"async\" />\n`;\n\n/**\n * @extends {HTMLElement}\n */\nclass MediaPreviewThumbnail extends window.HTMLElement {\n  #mediaController;\n\n  static get observedAttributes() {\n    return [\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER,\n      'time',\n      MediaUIAttributes.MEDIA_PREVIEW_IMAGE,\n      MediaUIAttributes.MEDIA_PREVIEW_COORDS,\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n  }\n\n  disconnectedCallback() {\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      [\n        'time',\n        MediaUIAttributes.MEDIA_PREVIEW_IMAGE,\n        MediaUIAttributes.MEDIA_PREVIEW_COORDS,\n      ].includes(attrName)\n    ) {\n      this.update();\n    }\n    if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    }\n  }\n\n  update() {\n    const mediaPreviewCoordsStr = this.getAttribute(\n      MediaUIAttributes.MEDIA_PREVIEW_COORDS\n    );\n    const mediaPreviewImage = this.getAttribute(\n      MediaUIAttributes.MEDIA_PREVIEW_IMAGE\n    );\n    if (!(mediaPreviewCoordsStr && mediaPreviewImage)) return;\n\n    const [x, y, w, h] = mediaPreviewCoordsStr\n      .split(/\\s+/)\n      .map((coord) => +coord);\n    const src = mediaPreviewImage.split('#')[0];\n\n    const computedStyle = getComputedStyle(this);\n    const { maxWidth, maxHeight, minWidth, minHeight } = computedStyle;\n    const maxRatio = Math.min(parseInt(maxWidth) / w, parseInt(maxHeight) / h);\n    const minRatio = Math.max(parseInt(minWidth) / w, parseInt(minHeight) / h);\n\n    // maxRatio scales down and takes priority, minRatio scales up.\n    const isScalingDown = maxRatio < 1;\n    const scale = isScalingDown ? maxRatio : minRatio > 1 ? minRatio : 1;\n\n    const { style } = getOrInsertCSSRule(this.shadowRoot, ':host');\n    const imgStyle = getOrInsertCSSRule(this.shadowRoot, 'img').style;\n    const img = this.shadowRoot.querySelector('img');\n\n    // Revert one set of extremum to its initial value on a known scale direction.\n    const extremum = isScalingDown ? 'min' : 'max';\n    style.setProperty(`${extremum}-width`, 'initial', 'important');\n    style.setProperty(`${extremum}-height`, 'initial', 'important');\n    style.width = `${w * scale}px`;\n    style.height = `${h * scale}px`;\n\n    const resize = () => {\n      imgStyle.width = `${this.imgWidth * scale}px`;\n      imgStyle.height = `${this.imgHeight * scale}px`;\n      imgStyle.display = 'block';\n    };\n\n    if (img.src !== src) {\n      img.onload = () => {\n        this.imgWidth = img.naturalWidth;\n        this.imgHeight = img.naturalHeight;\n        resize();\n      };\n      img.src = src;\n      resize();\n    }\n\n    resize();\n    imgStyle.transform = `translate(-${x * scale}px, -${y * scale}px)`;\n  }\n}\n\nif (!window.customElements.get('media-preview-thumbnail')) {\n  window.customElements.define('media-preview-thumbnail', MediaPreviewThumbnail);\n}\n\nexport default MediaPreviewThumbnail;\n", "import { MediaUIAttributes, MediaStateReceiverAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\nimport { window, document } from './utils/server-safe-globals.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nconst template = document.createElement('template');\n\nconst loadingIndicatorIcon = `\n<svg aria-hidden=\"true\" viewBox=\"0 0 100 100\">\n  <path d=\"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50\">\n    <animateTransform\n       attributeName=\"transform\"\n       attributeType=\"XML\"\n       type=\"rotate\"\n       dur=\"1s\"\n       from=\"0 50 50\"\n       to=\"360 50 50\"\n       repeatCount=\"indefinite\" />\n  </path>\n</svg>\n`;\n\ntemplate.innerHTML = `\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=loading] > *,\n:host ::slotted([slot=loading]) {\n  opacity: 1;\n  transition: opacity 0.15s;\n}\n\n:host(:not([is-loading])) slot[name=loading] > *, \n:host(:not([is-loading])) ::slotted([slot=loading]) {\n  opacity: 0;\n}\n\n:host(:not([is-loading])) #status {\n  display: none;\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-icon-width, 100px);\n  height: var(--media-loading-icon-height);\n  fill: var(--media-icon-color, #fff);\n  vertical-align: middle;\n}\n</style>\n\n<slot name=\"loading\">${loadingIndicatorIcon}</slot>\n<div id=\"status\" role=\"status\" aria-live=\"polite\">${nouns.MEDIA_LOADING()}</div>\n`;\n\nconst DEFAULT_LOADING_DELAY = 500;\n\nclass MediaLoadingIndicator extends window.HTMLElement {\n  #mediaController;\n\n  static get observedAttributes() {\n    return [\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER,\n      MediaUIAttributes.MEDIA_PAUSED,\n      MediaUIAttributes.MEDIA_LOADING,\n      'loading-delay',\n    ];\n  }\n\n  constructor() {\n    super();\n\n    const shadow = this.attachShadow({ mode: 'open' });\n    const indicatorHTML = template.content.cloneNode(true);\n    shadow.appendChild(indicatorHTML);\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      attrName === MediaUIAttributes.MEDIA_LOADING ||\n      attrName === MediaUIAttributes.MEDIA_PAUSED\n    ) {\n      const isPaused =\n        this.getAttribute(MediaUIAttributes.MEDIA_PAUSED) != undefined;\n      const isMediaLoading =\n        this.getAttribute(MediaUIAttributes.MEDIA_LOADING) != undefined;\n      const isLoading = !isPaused && isMediaLoading;\n      if (!isLoading) {\n        if (this.loadingDelayHandle) {\n          clearTimeout(this.loadingDelayHandle);\n          this.loadingDelayHandle = undefined;\n        }\n        this.removeAttribute('is-loading');\n      } else if (!this.loadingDelayHandle && isLoading) {\n        const loadingDelay = +(\n          this.getAttribute('loading-delay') ?? DEFAULT_LOADING_DELAY\n        );\n        this.loadingDelayHandle = setTimeout(() => {\n          this.setAttribute('is-loading', '');\n          this.loadingDelayHandle = undefined;\n        }, loadingDelay);\n      }\n    } else if (attrName === MediaStateReceiverAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        this.#mediaController?.unassociateElement?.(this);\n        this.#mediaController = null;\n      }\n      if (newValue) {\n        // @ts-ignore\n        this.#mediaController = this.getRootNode()?.getElementById(newValue);\n        this.#mediaController?.associateElement?.(this);\n      }\n    }\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaStateReceiverAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      // @ts-ignore\n      this.#mediaController = this.getRootNode()?.getElementById(mediaControllerId);\n      this.#mediaController?.associateElement?.(this);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.loadingDelayHandle) {\n      clearTimeout(this.loadingDelayHandle);\n      this.loadingDelayHandle = undefined;\n    }\n\n    // Use cached mediaController, getRootNode() doesn't work if disconnected.\n    this.#mediaController?.unassociateElement?.(this);\n    this.#mediaController = null;\n  }\n}\n\nif (!window.customElements.get('media-loading-indicator')) {\n  window.customElements.define('media-loading-indicator', MediaLoadingIndicator);\n}\n\nexport default MediaLoadingIndicator;\n", "import { window, document } from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n    }\n  </style>\n  <slot></slot>\n`;\n\nclass MediaTitleBar extends window.HTMLElement {\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n  }\n}\n\nif (!window.customElements.get('media-title-bar')) {\n  window.customElements.define('media-title-bar', MediaTitleBar);\n}\n\nexport default MediaTitleBar;\n", "import { window } from './utils/server-safe-globals.js';\nimport MediaChromeRange from './media-chrome-range.js';\nimport { MediaUIAttributes, MediaUIEvents } from './constants.js';\nimport { nouns } from './labels/labels.js';\n\nconst DEFAULT_MAX_VOLUME = 100;\n\nconst toVolume = (el) => {\n  const muted = el.getAttribute(MediaUIAttributes.MEDIA_MUTED) != null;\n  if (muted) return 0;\n\n  const volume = +(el.getAttribute(MediaUIAttributes.MEDIA_VOLUME) ?? 1);\n  return Math.round(volume * el.range.max);\n};\n\nconst formatAsPercentString = ({ value, max }) =>\n  `${Math.round((value / max) * 100)}%`;\n\nclass MediaVolumeRange extends MediaChromeRange {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_VOLUME,\n      MediaUIAttributes.MEDIA_MUTED,\n      MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE,\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this.range.max = DEFAULT_MAX_VOLUME;\n\n    this.range.addEventListener('input', () => {\n      const newVolume = this.range.value / this.range.max;\n      const detail = newVolume;\n      const evt = new window.CustomEvent(MediaUIEvents.MEDIA_VOLUME_REQUEST, {\n        composed: true,\n        bubbles: true,\n        detail,\n      });\n      this.dispatchEvent(evt);\n    });\n  }\n\n  connectedCallback() {\n    this.range.setAttribute('aria-label', nouns.VOLUME());\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      attrName === MediaUIAttributes.MEDIA_VOLUME ||\n      attrName === MediaUIAttributes.MEDIA_MUTED\n    ) {\n      const newVolume = toVolume(this);\n      this.range.value = newVolume;\n      this.range.setAttribute(\n        'aria-valuetext',\n        formatAsPercentString(this.range)\n      );\n      this.updateBar();\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n}\n\nif (!window.customElements.get('media-volume-range')) {\n  window.customElements.define('media-volume-range', MediaVolumeRange);\n}\n\nexport default MediaVolumeRange;\n"],
  "mappings": "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",
  "names": ["js_exports", "__export", "media_airplay_button_default", "media_captions_button_default", "media_cast_button_default", "media_chrome_button_default", "media_chrome_range_default", "MediaContainer", "media_control_bar_default", "media_controller_default", "media_current_time_display_default", "media_duration_display_default", "media_fullscreen_button_default", "media_gesture_receiver_default", "media_live_button_default", "media_loading_indicator_default", "media_mute_button_default", "media_pip_button_default", "media_play_button_default", "media_playback_rate_button_default", "media_poster_image_default", "media_preview_thumbnail_default", "media_preview_time_display_default", "media_progress_range_default", "media_seek_backward_button_default", "media_seek_forward_button_default", "media_time_display_default", "media_time_range_default", "media_title_element_default", "media_volume_range_default", "constants_exports", "labels_default", "time_exports", "constants_exports", "__export", "AttributeToStateChangeEventMap", "AvailabilityStates", "MediaStateChangeEvents", "MediaStateReceiverAttributes", "MediaUIAttributes", "MediaUIEvents", "PointerTypes", "ReadyStates", "StateChangeEventToAttributeMap", "StreamTypes", "TextTrackKinds", "TextTrackModes", "mapObj", "key", "eventType", "attrName", "evtType", "nouns", "playbackRate", "verbs", "seekOffset", "labels_default", "time_exports", "__export", "formatAsTimePhrase", "formatTime", "constToCamel", "word", "upperFirst", "x", "i", "isValidNumber", "x", "UnitLabels", "toTimeUnitPhrase", "timeUnitValue", "unitIndex", "unitLabel", "formatAsTimePhrase", "seconds", "isValidNumber", "positiveSeconds", "negative", "secondsDateTime", "index", "x", "formatTime", "guide", "s", "m", "h", "gm", "gh", "updateIconText", "svg", "value", "selector", "node", "getAllSlotted", "el", "name", "slotSelector", "slot", "getSlotted", "containsComposedNode", "rootNode", "childNode", "closestComposedNode", "closest", "getOrInsertCSSRule", "styleParent", "selectorText", "_a", "style", "cssRules", "rule", "EventTarget", "ResizeObserver", "windowShim", "documentShim", "isServer", "Window", "Document", "template", "Document", "_mediaController", "_clickListener", "_keyupListener", "_keydownListener", "MediaChromeButton", "Window", "options", "__privateAdd", "__publicField", "key", "__privateGet", "metaKey", "altKey", "buttonHTML", "slotTemplate", "style", "getOrInsertCSSRule", "MediaStateReceiverAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "__privateSet", "mediaControllerId", "media_chrome_button_default", "airplayIcon", "slotTemplate", "Document", "MediaAirplayButton", "media_chrome_button_default", "MediaUIAttributes", "options", "verbs", "evt", "Window", "MediaUIEvents", "media_airplay_button_default", "enterIcon", "exitIcon", "slotTemplate", "Document", "MediaUIAttributes", "updateAriaLabel", "el", "label", "verbs", "MediaCastButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "Window", "media_cast_button_default", "template", "Document", "_mediaController", "MediaGestureReceiver", "Window", "options", "__privateAdd", "shadow", "buttonHTML", "slotTemplate", "MediaStateReceiverAttributes", "MediaUIAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "__privateGet", "__privateSet", "getMediaControllerEl", "event", "composedTarget", "clientX", "clientY", "left", "top", "width", "height", "x", "y", "pointerType", "PointerTypes", "eventName", "MediaUIEvents", "controlEl", "mediaControllerId", "closestComposedNode", "media_gesture_receiver_default", "template", "Document", "MediaUIAttributes", "MEDIA_UI_ATTRIBUTE_NAMES", "defaultBreakpoints", "resizeCallback", "entries", "_a", "entry", "container", "breakpoints", "ranges", "createBreakpointMap", "activeBreakpoints", "getBreakpoints", "name", "pairs", "pair", "rect", "MediaContainer", "Window", "mutationCallback", "mutationsList", "media", "mutation", "node", "previousSibling", "wasFirst", "resizeObserver", "currentMedia", "chainedSlot", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "resolveMediaPromise", "rejectMediaPromise", "mediaName", "label", "nouns", "setInactive", "evt", "MediaStateChangeEvents", "setActive", "scheduleInactive", "e", "el", "seconds", "media_container_default", "_el", "_attr", "_tokens", "AttributeTokenList", "el", "attr", "__privateAdd", "__privateSet", "__privateGet", "_a", "val", "index", "callback", "tokens", "_b", "t", "token", "force", "oldToken", "newToken", "fullscreenApi", "Document", "splitTextTracksStr", "textTracksStr", "parseTextTrackStr", "textTrackStr", "language", "encodedLabel", "label", "parseTextTracksStr", "textTrackLikeObj", "textTrackObj", "parseTracks", "trackOrTracks", "trackObjOrStr", "formatTextTrackObj", "stringifyTextTrackList", "textTracks", "isMatchingPropOf", "key", "value", "obj", "textTrackObjAsPred", "filterObj", "preds", "textTrack", "pred", "updateTracksModeTo", "mode", "tracks", "tracksToUpdate", "isTrackToUpdate", "getTextTracksList", "media", "filterPredOrObj", "filterPred", "isCCOn", "el", "showingCaptions", "MediaUIAttributes", "showingSubtitlesAsCaptions", "toggleSubsCaps", "_a", "_b", "_c", "_d", "captionsShowingStr", "evt", "MediaUIEvents", "subtitlesShowingStr", "ccTrackStr", "subTrackStr", "StreamTypeValues", "StreamTypes", "ButtonPressedKeys", "DEFAULT_SEEK_OFFSET", "DEFAULT_TIME", "_hotKeys", "_fullscreenElement", "_keyUpHandler", "keyUpHandler_fn", "_keyDownHandler", "keyDownHandler_fn", "MediaController", "media_container_default", "__privateAdd", "AttributeTokenList", "airplaySupported", "AvailabilityStates", "fullscreenEnabled", "castSupported", "pipSupported", "volumeSupported", "volumeSupportPromise", "MediaUIAttributes", "mediaUIEventHandlers", "e", "media", "streamType", "Delegates", "autoSeekToLive", "volume", "Window", "Document", "fullscreenApi", "warnNotReady", "err", "cleanup", "tryPip", "_a", "time", "track", "getTextTracksList", "TextTrackKinds", "cue", "c", "base", "url", "previewCoordsStr", "tracks", "getCaptionTracks", "tracksToUpdate", "updateTracksModeTo", "TextTrackModes", "getSubtitleTracks", "seekable", "key", "handlerName", "constToCamel", "MediaUIEvents", "getPaused", "getMuted", "getVolume", "getVolumeLevel", "fullscreenEl", "isFullScreen", "containsComposedNode", "isPip", "pipElement", "castElement", "castState", "getCurrentTime", "getDuration", "getSeekable", "serializeTimeRanges", "getPlaybackRate", "isLoading", "airplaySupporHandler", "event", "castSupportHandler", "stringifyTextTrackList", "getShowingCaptionTracks", "getShowingSubtitleTracks", "__privateGet", "element", "__privateSet", "attrName", "oldValue", "newValue", "el", "events", "handler", "eventsStr", "volPref", "stateName", "state", "propagateMediaState", "evt", "AttributeToStateChangeEventMap", "associatedElementSubscriptions", "registerMediaStateReceiver", "unregisterMediaStateReceiver", "unsubscribe", "monitorForMediaStateReceivers", "els", "attribute", "index", "__privateMethod", "_b", "_c", "_d", "eventName", "currentTimeStr", "currentTime", "detail", "seekOffset", "toggleSubsCaps", "metaKey", "altKey", "getStreamType", "getTargetLiveWindow", "controller", "liveEdgeStartOffset", "liveEdgeStart", "level", "muted", "start", "end", "defaultType", "duration", "targetLiveWindow", "MEDIA_UI_ATTRIBUTE_NAMES", "getMediaUIAttributesFrom", "child", "observedAttributes", "mediaChromeAttributesList", "MediaStateReceiverAttributes", "isMediaStateReceiver", "setAttr", "attrValue", "delay", "isMediaSlotElementDescendant", "traverseForMediaStateReceivers", "rootNode", "mediaStateReceiverCallback", "traverseForMediaStateReceiversSync", "children", "shadowChildren", "name", "val", "registerMediaStateReceiverHandler", "unregisterMediaStateReceiverHandler", "mutationCallback", "mutationsList", "mutationRecord", "addedNodes", "removedNodes", "type", "target", "attributeName", "node", "observer", "testMediaEl", "getTestMediaEl", "hasVolumeSupportAsync", "mediaEl", "prevVolume", "ms", "resolve", "hasPipSupport", "supported", "hasFullscreenSupport", "emptyTimeRanges", "unsignedIdx", "timeRanges", "_", "i", "media_controller_default", "template", "Document", "thumbStyles", "trackStyles", "_thumbWidth", "_mediaController", "_onFocusIn", "_onFocusOut", "MediaChromeRange", "Window", "__privateAdd", "style", "getOrInsertCSSRule", "__privateSet", "MediaStateReceiverAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "__privateGet", "mediaControllerId", "evt", "rangeRect", "mousePercent", "colorArray", "gradientStr", "prevPercent", "color", "range", "relativeValue", "relativeMax", "rangePercent", "thumbPercent", "media_chrome_range_default", "template", "Document", "_mediaController", "MediaControlBar", "Window", "__privateAdd", "MediaStateReceiverAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "__privateGet", "__privateSet", "mediaControllerId", "media_control_bar_default", "template", "Document", "_mediaController", "MediaTextDisplay", "Window", "__privateAdd", "style", "getOrInsertCSSRule", "MediaStateReceiverAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "__privateGet", "__privateSet", "mediaControllerId", "media_text_display_default", "MediaCurrentTimeDisplay", "media_text_display_default", "MediaUIAttributes", "formatTime", "attrName", "oldValue", "newValue", "Window", "media_current_time_display_default", "MediaDurationDisplay", "media_text_display_default", "MediaUIAttributes", "formatTime", "attrName", "oldValue", "newValue", "Window", "media_duration_display_default", "DEFAULT_TIMES_SEP", "formatTimesLabel", "el", "timesSep", "_a", "_b", "_c", "showRemaining", "showDuration", "currentTime", "endTime", "timeLabel", "formatTime", "DEFAULT_MISSING_TIME_PHRASE", "updateAriaValueText", "currentTimePhrase", "formatAsTimePhrase", "totalTimePhrase", "fullPhrase", "MediaTimeDisplay", "media_text_display_default", "MediaUIAttributes", "nouns", "attrName", "oldValue", "newValue", "timesLabel", "attrVal", "seekable", "time", "end", "start", "Window", "media_time_display_default", "ccIconOn", "ccIconOff", "slotTemplate", "Document", "updateAriaChecked", "el", "isCCOn", "MediaCaptionsButton", "media_chrome_button_default", "MediaUIAttributes", "options", "nouns", "attrName", "oldValue", "newValue", "subtitlesIncluded", "nextCaptionsReady", "toggleSubsCaps", "Window", "media_captions_button_default", "DEFAULT_SEEK_OFFSET", "forwardIcon", "slotTemplate", "Document", "DEFAULT_TIME", "updateAriaLabel", "el", "seekOffset", "label", "verbs", "updateSeekIconValue", "svg", "getSlotted", "value", "updateIconText", "MediaSeekForwardButton", "media_chrome_button_default", "MediaUIAttributes", "options", "attrName", "_oldValue", "newValue", "currentTimeStr", "detail", "evt", "Window", "MediaUIEvents", "media_seek_forward_button_default", "enterFullscreenIcon", "exitFullscreenIcon", "slotTemplate", "Document", "MediaUIAttributes", "updateAriaLabel", "el", "label", "verbs", "MediaFullscreenButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "Window", "media_fullscreen_button_default", "MEDIA_TIME_IS_LIVE", "MEDIA_PAUSED", "MediaUIAttributes", "MEDIA_SEEK_TO_LIVE_REQUEST", "MEDIA_PLAY_REQUEST", "MediaUIEvents", "indicatorSVG", "slotTemplate", "Document", "MediaLiveButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "Window", "media_live_button_default", "offIcon", "lowIcon", "highIcon", "slotTemplate", "Document", "MediaUIAttributes", "updateAriaLabel", "el", "label", "verbs", "MediaMuteButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "Window", "media_mute_button_default", "pipIcon", "slotTemplate", "Document", "MediaUIAttributes", "updateAriaLabel", "el", "label", "verbs", "MediaPipButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "Window", "media_pip_button_default", "playIcon", "pauseIcon", "slotTemplate", "Document", "MediaUIAttributes", "updateAriaLabel", "el", "label", "verbs", "MediaPlayButton", "media_chrome_button_default", "options", "attrName", "oldValue", "newValue", "eventName", "MediaUIEvents", "Window", "media_play_button_default", "DEFAULT_RATES", "DEFAULT_RATE", "slotTemplate", "Document", "MediaPlaybackRateButton", "media_chrome_button_default", "MediaUIAttributes", "options", "attrName", "oldValue", "newValue", "newRates", "str", "num", "a", "b", "newPlaybackRate", "playbackRate", "nouns", "_a", "_b", "currentRate", "detail", "r", "evt", "Window", "MediaUIEvents", "media_playback_rate_button_default", "template", "Document", "unsetBackgroundImage", "el", "setBackgroundImage", "image", "MediaPosterImage", "Window", "attrName", "_oldValue", "newValue", "media_poster_image_default", "DEFAULT_MISSING_TIME_PHRASE", "updateAriaValueText", "el", "range", "currentTimePhrase", "formatAsTimePhrase", "totalTimePhrase", "fullPhrase", "template", "Document", "MediaUIAttributes", "_boxes", "_previewBox", "_currentBox", "_boxPaddingLeft", "_boxPaddingRight", "_getBoxPosition", "getBoxPosition_fn", "_pointermoveHandler", "_rangeEntered", "_offRangeHandler", "_trackMouse", "_stopTrackingMouse", "_rangepointermoveHandler", "_enableBoxes", "enableBoxes_fn", "_disableBoxes", "disableBoxes_fn", "MediaTimeRange", "media_chrome_range_default", "__privateAdd", "evt", "__privateGet", "b", "duration", "rangeRect", "mouseRatio", "boxPos", "__privateMethod", "style", "getOrInsertCSSRule", "detail", "mediaPreviewEvt", "Window", "MediaUIEvents", "__privateSet", "endEvt", "mediaDurationStr", "delta", "computedStyle", "nouns", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "attrVal", "buffered", "timePair", "timeStr", "seekable", "time", "end", "start", "colorsArray", "relativeMax", "currentTime", "bufferedEnd", "buffPercent", "boxRatio", "box", "ratio", "position", "boxWidth", "bounds", "closestComposedNode", "mediaBoundsRect", "boxMin", "boxMax", "media_time_range_default", "MediaProgressRange", "media_time_range_default", "Window", "media_progress_range_default", "DEFAULT_SEEK_OFFSET", "backwardIcon", "slotTemplate", "Document", "DEFAULT_TIME", "updateAriaLabel", "el", "seekOffset", "label", "verbs", "updateSeekIconValue", "svg", "getSlotted", "value", "updateIconText", "MediaSeekBackwardButton", "media_chrome_button_default", "MediaUIAttributes", "options", "attrName", "_oldValue", "newValue", "currentTimeStr", "currentTime", "detail", "evt", "Window", "MediaUIEvents", "media_seek_backward_button_default", "MediaPreviewTimeDisplay", "media_text_display_default", "MediaUIAttributes", "attrName", "oldValue", "newValue", "formatTime", "Window", "media_preview_time_display_default", "template", "Document", "_mediaController", "MediaPreviewThumbnail", "Window", "__privateAdd", "MediaStateReceiverAttributes", "MediaUIAttributes", "_a", "_b", "_c", "mediaControllerId", "__privateSet", "__privateGet", "attrName", "oldValue", "newValue", "_d", "_e", "mediaPreviewCoordsStr", "mediaPreviewImage", "x", "y", "w", "h", "coord", "src", "computedStyle", "maxWidth", "maxHeight", "minWidth", "minHeight", "maxRatio", "minRatio", "isScalingDown", "scale", "style", "getOrInsertCSSRule", "imgStyle", "img", "extremum", "resize", "media_preview_thumbnail_default", "template", "Document", "loadingIndicatorIcon", "nouns", "DEFAULT_LOADING_DELAY", "_mediaController", "MediaLoadingIndicator", "Window", "__privateAdd", "shadow", "indicatorHTML", "MediaStateReceiverAttributes", "MediaUIAttributes", "attrName", "oldValue", "newValue", "_a", "_b", "_c", "_d", "_e", "_f", "isPaused", "isMediaLoading", "isLoading", "loadingDelay", "__privateGet", "__privateSet", "mediaControllerId", "media_loading_indicator_default", "template", "Document", "MediaTitleBar", "Window", "media_title_element_default", "DEFAULT_MAX_VOLUME", "toVolume", "el", "_a", "MediaUIAttributes", "volume", "formatAsPercentString", "value", "max", "MediaVolumeRange", "media_chrome_range_default", "detail", "evt", "Window", "MediaUIEvents", "nouns", "attrName", "oldValue", "newValue", "newVolume", "media_volume_range_default", "MediaChrome", "media_controller_default", "Window", "MediaContainer"]
}
